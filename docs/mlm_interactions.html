<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="de" xml:lang="de"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>18&nbsp; Interaktionseffekte – Skriptum - Fortgeschrittene Statistik</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./mlm_dummy_coding.html" rel="next">
<link href="./mlm_basics.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-8da5b4427184b79ecddefad3d342027e.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "Keine Treffer",
    "search-matching-documents-text": "Treffer",
    "search-copy-link-title": "Link in die Suche kopieren",
    "search-hide-matches-text": "Zusätzliche Treffer verbergen",
    "search-more-match-text": "weitere Treffer in diesem Dokument",
    "search-more-matches-text": "weitere Treffer in diesem Dokument",
    "search-clear-button-title": "Zurücksetzen",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Abbrechen",
    "search-submit-button-title": "Abschicken",
    "search-label": "Suchen"
  }
}</script>
<script>

  MathJax = {

    tex: {

      tags: 'ams'  // should be 'ams', 'none', or 'all'

    }

  };

</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Seitenleiste umschalten" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./mlm_title.html">Multiple Regression</a></li><li class="breadcrumb-item"><a href="./mlm_interactions.html"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Interaktionseffekte</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Seitenleiste umschalten" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Suchen" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Skriptum - Fortgeschrittene Statistik</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Suchen"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Vorwort</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./r_startup.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Eine Einführung in die Programmiersprache R</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./r_intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Eine Übersicht über <code>R</code></span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./r_vars_types.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Variablen und Datentypen in <code>R</code></span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./r_flowcontrol.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Ablaufkontrolle</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./r_functions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Funktionen in <code>R</code></span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./r_tidyverse.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Datenverarbeitung mit <code>tidyverse</code></span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./r_visualization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Datenvisualisierung mit <code>ggplot2</code></span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./r_literate_programming.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Literate programming in <code>R</code></span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./stats_title.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Statistik - Die Grundlagen</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stats_basics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Eine kleine Welt der Unsicherheit</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stats_significance.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Statistische Signifikanz, p-Wert und Power</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stats_estimation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Parameterschätzung</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stats_distributions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Theoretische Verteilungen</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stats_hypotheses.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Weitere Grundlagen der Statistik</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./slm_title.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Das einfache Regressionmodell</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./slm_basics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Einführung</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./slm_inference.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Inferenz</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./slm_model_fit.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Modellfit</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./slm_prediction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Vorhersage</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./mlm_title.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Multiple Regression</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./mlm_basics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Einführung</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./mlm_interactions.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Interaktionseffekte</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./mlm_dummy_coding.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Integration von nominalen Variablen</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./mlm_hierarchies.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Modellhierarchien</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./mlm_prediction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Vorhersagen bei der multiple linearen Regression</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./mlm_logistic.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Logistische Regression</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./ed_title.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Experimentelles Design</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ed_basics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Einführung</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ed_reliability.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Reliabilität</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ed_crd.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Completely Randomized Design</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ed_linear_contrasts.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Lineare Kontraste</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ed_crfd.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">Completely Randomized Factorial Design</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ed_ancova.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">ANCOVA</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ed_crbd.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">Block Design</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ed_irbd.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">30</span>&nbsp; <span class="chapter-title">Incomplete Randomized Block Design</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ed_split_plot.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">31</span>&nbsp; <span class="chapter-title">Split-plot Design</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ed_cross_over.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">32</span>&nbsp; <span class="chapter-title">Cross-over Design</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./appendix_math.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Mathematische Grundlagen</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Literatur</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Inhaltsverzeichnis</h2>
   
  <ul>
  <li><a href="#ein-handballbeispiel" id="toc-ein-handballbeispiel" class="nav-link active" data-scroll-target="#ein-handballbeispiel"><span class="header-section-number">18.1</span> Ein Handballbeispiel</a>
  <ul class="collapse">
  <li><a href="#kontinierlichen-zu-nominaler-variable-in-r" id="toc-kontinierlichen-zu-nominaler-variable-in-r" class="nav-link" data-scroll-target="#kontinierlichen-zu-nominaler-variable-in-r"><span class="header-section-number">18.1.1</span> Kontinierlichen zu nominaler Variable in <code>R</code></a></li>
  </ul></li>
  <li><a href="#interaktion-zwischen-zwei-effekten" id="toc-interaktion-zwischen-zwei-effekten" class="nav-link" data-scroll-target="#interaktion-zwischen-zwei-effekten"><span class="header-section-number">18.2</span> Interaktion zwischen zwei Effekten</a>
  <ul class="collapse">
  <li><a href="#interaktionseffekte-in-lm" id="toc-interaktionseffekte-in-lm" class="nav-link" data-scroll-target="#interaktionseffekte-in-lm"><span class="header-section-number">18.2.1</span> Interaktionseffekte in <code>lm()</code></a></li>
  </ul></li>
  <li><a href="#koeffizienten-im-interaktionsmodell-verstehen" id="toc-koeffizienten-im-interaktionsmodell-verstehen" class="nav-link" data-scroll-target="#koeffizienten-im-interaktionsmodell-verstehen"><span class="header-section-number">18.3</span> Koeffizienten im Interaktionsmodell verstehen</a>
  <ul class="collapse">
  <li><a href="#interaktionseffekte-deep-dive" id="toc-interaktionseffekte-deep-dive" class="nav-link" data-scroll-target="#interaktionseffekte-deep-dive"><span class="header-section-number">18.3.1</span> Interaktionseffekte deep-dive</a></li>
  </ul></li>
  <li><a href="#die-form-der-modellfläche-unter-dem-additiven-und-der-interaktionsmodell" id="toc-die-form-der-modellfläche-unter-dem-additiven-und-der-interaktionsmodell" class="nav-link" data-scroll-target="#die-form-der-modellfläche-unter-dem-additiven-und-der-interaktionsmodell"><span class="header-section-number">18.4</span> Die Form der Modellfläche unter dem additiven und der Interaktionsmodell</a></li>
  <li><a href="#modelmatrix-in-r-unter-dem-interaktionsmodell" id="toc-modelmatrix-in-r-unter-dem-interaktionsmodell" class="nav-link" data-scroll-target="#modelmatrix-in-r-unter-dem-interaktionsmodell"><span class="header-section-number">18.5</span> Modelmatrix in <code>R</code> unter dem Interaktionsmodell</a></li>
  <li><a href="#take-away" id="toc-take-away" class="nav-link" data-scroll-target="#take-away"><span class="header-section-number">18.6</span> Take-away</a></li>
  <li><a href="#einfluss-der-zentrierung-auf-die-koeffizienten-im-interaktionsmodell-advanced" id="toc-einfluss-der-zentrierung-auf-die-koeffizienten-im-interaktionsmodell-advanced" class="nav-link" data-scroll-target="#einfluss-der-zentrierung-auf-die-koeffizienten-im-interaktionsmodell-advanced"><span class="header-section-number">18.7</span> Einfluss der Zentrierung auf die Koeffizienten im Interaktionsmodell (advanced)</a></li>
  <li><a href="#zum-nacharbeiten" id="toc-zum-nacharbeiten" class="nav-link" data-scroll-target="#zum-nacharbeiten"><span class="header-section-number">18.8</span> Zum Nacharbeiten</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./mlm_title.html">Multiple Regression</a></li><li class="breadcrumb-item"><a href="./mlm_interactions.html"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Interaktionseffekte</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Interaktionseffekte</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>Bisher sind die Variablen in das multiple Regressionsmodell nur <em>additiv</em> eingegangen. D.h. in der Modellspezifikation sind die Prädiktorvariablen <span class="math inline">\(x_i\)</span> immer nur mit einem <span class="math inline">\(+\)</span> in die Formel eingegangen. Im folgenden soll nun untersucht werden, was passiert wenn die Prädiktorvariablen auch multiplikativ in das Modell eingehen. Dies führt dann zu sogenannten <em>Interaktionseffekten</em>.</p>
<section id="ein-handballbeispiel" class="level2" data-number="18.1">
<h2 data-number="18.1" class="anchored" data-anchor-id="ein-handballbeispiel"><span class="header-section-number">18.1</span> Ein Handballbeispiel</h2>
<p>Ausgangspunkt sei ein hypothetischen Datensatz aus dem Handball angelehnt an die Übung. Es sei ein Datensatz mit drei Datenspalten gegeben. Die Variablen sind die Wurfgeschwindigkeit, die Körpermasse und die Armspannweite. Ziel ist es, die Wurfgeschwindigkeit anhand der Körpermasse und der Armspanweite zu modellieren angelehnt an <span class="citation" data-cites="debanne2011">Debanne und Laffaye (<a href="references.html#ref-debanne2011" role="doc-biblioref">2011</a>)</span>. Zunächst, wie immer, eine Betrachtung der deskriptiven Daten (siehe <a href="#tbl-mlm-inter-handball-01" class="quarto-xref">Tabelle&nbsp;<span>18.1</span></a>).</p>
<div id="tbl-mlm-inter-handball-01" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-mlm-inter-handball-01-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabelle&nbsp;18.1: Deskriptive Statistiken der Handballdaten
</figcaption>
<div aria-describedby="tbl-mlm-inter-handball-01-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="cell caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: right;">&nbsp;</th>
<th style="text-align: right;">Mean</th>
<th style="text-align: right;">Std.Dev</th>
<th style="text-align: right;">Min</th>
<th style="text-align: right;">Max</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;"><strong>Armspannweite[cm]</strong></td>
<td style="text-align: right;">184.29</td>
<td style="text-align: right;">7.72</td>
<td style="text-align: right;">169.43</td>
<td style="text-align: right;">200.74</td>
</tr>
<tr class="even">
<td style="text-align: right;"><strong>Körpermasse[kg]</strong></td>
<td style="text-align: right;">77.46</td>
<td style="text-align: right;">10.26</td>
<td style="text-align: right;">57.95</td>
<td style="text-align: right;">101.12</td>
</tr>
<tr class="odd">
<td style="text-align: right;"><strong>Wurfgeschwindigkeit[m/s]</strong></td>
<td style="text-align: right;">21.85</td>
<td style="text-align: right;">2.31</td>
<td style="text-align: right;">18.50</td>
<td style="text-align: right;">29.22</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<p>In <a href="#tbl-mlm-inter-handball-01" class="quarto-xref">Tabelle&nbsp;<span>18.1</span></a> ist zunächst einmal nichts auffallendes zu sehen. Vielleicht sind die Wurfgeschwindigkeiten etwas zu niedrig für Hochleistungshandballer, aber das stört die weitere Analyse der Daten. Als nächstes erfolgt eine Betrachtung der Daten mittels von Streudiagrammen.</p>
<div id="fig-mlm-inter-handball-01" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-mlm-inter-handball-01-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-mlm-inter-handball-01" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-mlm-inter-handball-01-1" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-mlm-inter-handball-01-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="mlm_interactions_files/figure-html/fig-mlm-inter-handball-01-1.png" class="img-fluid figure-img" data-ref-parent="fig-mlm-inter-handball-01" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-mlm-inter-handball-01-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) Geschwindigkeit gegen Körpergewicht
</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-mlm-inter-handball-01" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-mlm-inter-handball-01-2" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-mlm-inter-handball-01-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="mlm_interactions_files/figure-html/fig-mlm-inter-handball-01-2.png" class="img-fluid figure-img" data-ref-parent="fig-mlm-inter-handball-01" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-mlm-inter-handball-01-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) Geschwindigkeit gegen Armspannweite
</figcaption>
</figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-mlm-inter-handball-01-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;18.1: Streudiagramme der Handballdaten.
</figcaption>
</figure>
</div>
<p>In beiden Graphen ist mit etwas gutem Willen ein positiver Zusammenhang zwischen den jeweiligen Prädiktorvariablen und der Wurfgeschwindigkeit zu identifizieren. Für das Körpergewicht in <a href="#fig-mlm-inter-handball-01-1" class="quarto-xref">Abbildung&nbsp;<span>18.1 (a)</span></a> vielleicht etwas mehr als für die Armspannweite in <a href="#fig-mlm-inter-handball-01-2" class="quarto-xref">Abbildung&nbsp;<span>18.1 (b)</span></a>.</p>
<p>Nun sollen die Daten mittels eines linearen Modells modelliert werden.</p>
<p><span class="math display">\[\begin{equation*}
Y_{i} = \beta_0 + \beta_1 \times \textrm{bm}_i + \beta_2 \times \textrm{as}_i + \epsilon_i
\end{equation*}\]</span></p>
<p>Mit <code>lm()</code> in <code>R</code> Code übersetzt:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>mod_1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(vel <span class="sc">~</span> body_mass <span class="sc">+</span> arm_span, handball)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Bei Betrachtung der Modellparameter (siehe <a href="#tbl-mlm-inter-handball-mod1" class="quarto-xref">Tabelle&nbsp;<span>18.2</span></a>) ist zu erkennen, dass die Steigungskoeffizienten zwar knapp statistisch signifikant sind, aber in Bezug auf die Residualvarianz bzw. den Standardfehler <span class="math inline">\(\hat{\sigma}\)</span> eine ziemlich hohe Restunsicherheit <span class="math inline">\(\hat{\sigma} = 1.9958\)</span> aufweisen. Dies macht die Vorhersage letztendlich unbrauchbar.</p>
<div class="cell">
<div id="tbl-mlm-inter-handball-mod1" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-mlm-inter-handball-mod1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabelle&nbsp;18.2: Modellfit der Handballdaten aus Model 1
</figcaption>
<div aria-describedby="tbl-mlm-inter-handball-mod1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="do-not-create-environment cell caption-top table table-sm table-striped small">
<caption>Modell 1</caption>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;"><span class="math inline">\(\hat{\beta}\)</span></th>
<th style="text-align: right;"><span class="math inline">\(s_e\)</span></th>
<th style="text-align: right;">t</th>
<th style="text-align: left;">p</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">(Intercept)</td>
<td style="text-align: right;">-1.768</td>
<td style="text-align: right;">7.632</td>
<td style="text-align: right;">-0.232</td>
<td style="text-align: left;">0.818</td>
</tr>
<tr class="even">
<td style="text-align: left;">body_mass</td>
<td style="text-align: right;">0.077</td>
<td style="text-align: right;">0.033</td>
<td style="text-align: right;">2.359</td>
<td style="text-align: left;">0.024</td>
</tr>
<tr class="odd">
<td style="text-align: left;">arm_span</td>
<td style="text-align: right;">0.096</td>
<td style="text-align: right;">0.044</td>
<td style="text-align: right;">2.192</td>
<td style="text-align: left;">0.035</td>
</tr>
<tr class="even">
<td style="text-align: left;"><span class="math inline">\(\hat{\sigma}\)</span></td>
<td style="text-align: right;">1.996</td>
<td style="text-align: right;"></td>
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<p>Der <span class="math inline">\(y\)</span>-Achsenabschnitt <span class="math inline">\(\beta_0\)</span> im Modell macht auch ebenfalls keinen Sinn, da er, verbal übersetzt ausdrückt, dass ein Handballer mit einer Spannweite von <span class="math inline">\(0\)</span>cm und einer Körpermasse von <span class="math inline">\(0\)</span> Kg eine Wurfgeschwindigkeit von <span class="math inline">\(v = -1.8\)</span>m/s erreichen würde. Um den <span class="math inline">\(y\)</span>-Achsenabschnitt interpretierbar zu machen, ist damit wie schon so oft sinnvoll die Daten zu zentrieren. Dies ändert wieder nichts an dem Modellfit, aber der <span class="math inline">\(y\)</span>-Achsenabschnitt bekommt dadurch einen sinnvollen Wert. Wie immer beim Zentrieren, werden von den Prädiktorvariablen die jeweiligen Mittelwert abgezogen. Übersetzt in <code>R</code>-Code mittels der Funktion <code>mutate()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>handball <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">mutate</span>(handball,</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>                          <span class="at">body_mass_c =</span> body_mass <span class="sc">-</span> <span class="fu">mean</span>(body_mass),</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>                          <span class="at">arm_span_c =</span> arm_span <span class="sc">-</span> <span class="fu">mean</span>(arm_span))</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Nun wird wieder da gleiche Modell angepasst, wobei die zentrierten Variablen als Prädiktorvariablen verwendet werden.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>mod_2 <span class="ot">&lt;-</span> <span class="fu">lm</span>(vel <span class="sc">~</span> body_mass_c <span class="sc">+</span> arm_span_c, handball)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Wie erwartet ändert dies nichts an den Modellwerten, bis auf den <span class="math inline">\(y\)</span>-Achsenabschnitt. Der Wert von <span class="math inline">\(21.8\)</span> ist jetzt dahingehend zu interpretieren, dass ein Handballer mit einer Armspannweite von <span class="math inline">\(184\)</span>cm und einer Körpermasse von <span class="math inline">\(77\)</span>Kg eine Wurfgeschwindigkeit von <span class="math inline">\(21.9\)</span>m/s erreichen sollte (siehe <a href="#tbl-mlm-inter-handball-01" class="quarto-xref">Tabelle&nbsp;<span>18.1</span></a> und <a href="#tbl-mlm-inter-handball-mod2" class="quarto-xref">Tabelle&nbsp;<span>18.3</span></a>).</p>
<div class="cell">
<div id="tbl-mlm-inter-handball-mod2" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-mlm-inter-handball-mod2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabelle&nbsp;18.3: Modellfit der Handballdaten aus Model 2
</figcaption>
<div aria-describedby="tbl-mlm-inter-handball-mod2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="do-not-create-environment cell caption-top table table-sm table-striped small">
<caption>Modell 2</caption>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;"><span class="math inline">\(\hat{\beta}\)</span></th>
<th style="text-align: right;"><span class="math inline">\(s_e\)</span></th>
<th style="text-align: right;">t</th>
<th style="text-align: left;">p</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">(Intercept)</td>
<td style="text-align: right;">21.852</td>
<td style="text-align: right;">0.316</td>
<td style="text-align: right;">69.247</td>
<td style="text-align: left;">&lt;0.001</td>
</tr>
<tr class="even">
<td style="text-align: left;">body_mass_c</td>
<td style="text-align: right;">0.077</td>
<td style="text-align: right;">0.033</td>
<td style="text-align: right;">2.359</td>
<td style="text-align: left;">0.024</td>
</tr>
<tr class="odd">
<td style="text-align: left;">arm_span_c</td>
<td style="text-align: right;">0.096</td>
<td style="text-align: right;">0.044</td>
<td style="text-align: right;">2.192</td>
<td style="text-align: left;">0.035</td>
</tr>
<tr class="even">
<td style="text-align: left;"><span class="math inline">\(\hat{\sigma}\)</span></td>
<td style="text-align: right;">1.996</td>
<td style="text-align: right;"></td>
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<p>Nun erfolgt wie immer eine Betrachtung der Residuen <span class="math inline">\(e_i\)</span> im zentrierten, additiven Modell (Model 2) (siehe <a href="#fig-mlm-inter-handball-02" class="quarto-xref">Abbildung&nbsp;<span>18.2</span></a>).</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-mlm-inter-handball-02" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-mlm-inter-handball-02-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="mlm_interactions_files/figure-html/fig-mlm-inter-handball-02-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-mlm-inter-handball-02-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;18.2: Residuenplot unter Modell 2
</figcaption>
</figure>
</div>
</div>
</div>
<p>Da die Werte für kleine und große vorhergesagte Werte <span class="math inline">\(\hat{y}_i\)</span> ganz klar ein Muster aufweisen, kann davon ausgegangen werden, das das Modell eine in den Daten vorhandene <em>Struktur</em> nicht zu modellieren im Stande ist. Dazu wird nun noch einmal der Einfluss der Prädiktorvariablen auf die Wurfgeschwindigkeit genauer untersucht.</p>
<p>Um den Zusammenhang der beiden Variablen zusammen zu untersuchen werden nun Hilfsvariablen definiert. Dazu wird eine künstliche Unterteilung der Armspannweiten und Körpermassen in drei verschiedene Kategorien vorgenommen. D.h. die Armspannweite wird in kurze, mittlere und lange Spannweiten und die Körpermasse wird in leicht, mittel und schwer unterteilt.</p>
<div class="cell">
<div id="tbl-mlm-inter-cut" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-mlm-inter-cut-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabelle&nbsp;18.4: Ausschnitt der Handballdaten.
</figcaption>
<div aria-describedby="tbl-mlm-inter-cut-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="do-not-create-environment cell caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: right;">arm_span_c</th>
<th style="text-align: left;">as_f</th>
<th style="text-align: right;">body_mass_c</th>
<th style="text-align: left;">bm_f</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1.13</td>
<td style="text-align: left;">mittel</td>
<td style="text-align: right;">-8.75</td>
<td style="text-align: left;">leicht</td>
</tr>
<tr class="even">
<td style="text-align: right;">-0.21</td>
<td style="text-align: left;">mittel</td>
<td style="text-align: right;">-3.61</td>
<td style="text-align: left;">mittel</td>
</tr>
<tr class="odd">
<td style="text-align: right;">16.45</td>
<td style="text-align: left;">lang</td>
<td style="text-align: right;">11.97</td>
<td style="text-align: left;">schwer</td>
</tr>
<tr class="even">
<td style="text-align: right;">-13.95</td>
<td style="text-align: left;">kurz</td>
<td style="text-align: right;">7.51</td>
<td style="text-align: left;">schwer</td>
</tr>
<tr class="odd">
<td style="text-align: right;">-7.40</td>
<td style="text-align: left;">kurz</td>
<td style="text-align: right;">4.94</td>
<td style="text-align: left;">mittel</td>
</tr>
<tr class="even">
<td style="text-align: right;">16.39</td>
<td style="text-align: left;">lang</td>
<td style="text-align: right;">14.11</td>
<td style="text-align: left;">schwer</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<p>In <a href="#tbl-mlm-inter-cut" class="quarto-xref">Tabelle&nbsp;<span>18.4</span></a> ist ein Ausschnitt der Daten zu sehen. Hier sind die beiden neuen Spalten die die kontinuierlichen Variablen Körpermasse und Armspannweite jeweils in eine nominale Variable abbilden abgetragen. Hier ist zu erkennen, dass größere positive Werte jeweils als <code>lang</code> bzw. <code>schwer</code> kategorisiert werden und entsprechend kleine absolute Wert als <code>mittel</code> und kleine negative Werte als <code>kurz</code> bzw. <code>leicht</code>. Die Geschwindigkeitsdaten können nun in einem Graphen abgebildet werden, bei dem nicht mehr die originalen, kontinuierlichen Daten, sondern nun die beiden nominalen Variablen verwendet werden (siehe <a href="#fig-mlm-inter-handball-03" class="quarto-xref">Abbildung&nbsp;<span>18.3</span></a>).</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-mlm-inter-handball-03" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-mlm-inter-handball-03-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="mlm_interactions_files/figure-html/fig-mlm-inter-handball-03-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-mlm-inter-handball-03-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;18.3: Mittlere Wurfgeschwindigkeiten (<span class="math inline">\(\pm\)</span>SD) für die Unterteilung nach Körpergewicht und Armspannweite in Kategorien
</figcaption>
</figure>
</div>
</div>
</div>
<p>In dem Graphen zeigt sich ein interessantes Muster. Für mittel und schwere Handballer nimmt die Wurfgeschwindigkeit mit der Armspannweite zu. Dagegen ist der Trend gegensätzliche für leichte Handballer. D.h. der Einfluss der Armspannweite hängt davon ab wie schwer der Handballer ist. Der Einfluss ist in der anderen Richtung genauso, der Einfluss der Körpermasse hängt von der Armspannweite ab. Wenn sich die Effekte zweier Prädiktorvariablen gegenseitig beeinflussen, dann wird dies als <strong>Interaktionseffekts</strong> bezeichnet.</p>
<section id="kontinierlichen-zu-nominaler-variable-in-r" class="level3" data-number="18.1.1">
<h3 data-number="18.1.1" class="anchored" data-anchor-id="kontinierlichen-zu-nominaler-variable-in-r"><span class="header-section-number">18.1.1</span> Kontinierlichen zu nominaler Variable in <code>R</code></h3>
<p>Um die Unterteilung einer kontinuierlichen Variablen in eine nominale Variable durchzuführen, kann in <code>R</code> die <code>cut_number()</code>-Funktion aus dem <code>tidyverse</code> verwendet werden. Die Parameter der Funktion sind die kontinuierliche Variable und die Anzahl der gewünschten Kategorien. Über den Parameter <code>labels</code> können die Bezeichnungen angepasst werden.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>hb_quick <span class="ot">&lt;-</span> handball <span class="sc">|&gt;</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">as_f =</span> <span class="fu">cut_number</span>(arm_span_c, <span class="dv">3</span>, <span class="at">labels=</span><span class="fu">c</span>(<span class="st">'kurz'</span>,<span class="st">'mittel'</span>,<span class="st">'lang'</span>)),</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">bm_f =</span> <span class="fu">cut_number</span>(body_mass_c, <span class="dv">3</span>, <span class="at">labels=</span><span class="fu">c</span>(<span class="st">'leicht'</span>,<span class="st">'mittel'</span>,<span class="st">'schwer'</span>))</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  ) </span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><code>cut_number()</code> unterteilt den Wertebereich der Variablen so, dass die Anzahl der Datenpunkte pro Kategorie ungefähr gleich sind. Eine verwandte Funktion ist <code>cut_interval()</code> die die Kategoriengrenzen so bestimmt, dass die Intervall ungefähr gleich groß sind, unabhängig davon wie viele Datenpunkte in den jeweiligen Kategorien sind.</p>
</section>
</section>
<section id="interaktion-zwischen-zwei-effekten" class="level2" data-number="18.2">
<h2 data-number="18.2" class="anchored" data-anchor-id="interaktion-zwischen-zwei-effekten"><span class="header-section-number">18.2</span> Interaktion zwischen zwei Effekten</h2>
<div id="def-interaction" class="theorem definition">
<p><span class="theorem-title"><strong>Definition 18.1 (Interaktionseffekt)</strong></span> Wenn der Effekt einer unabhängigen Variable auf die abhängige Variable davon abhängt welche Ausprägung eine weitere unabhängige Variable hat, dann wird dies als ein Interaktionseffekt bezeichnet.</p>
</div>
<p>In Abgrenzung zu Interaktionseffekte werden die <em>normalen</em> Effekte als Haupteffekte bezeichnet.</p>
<div id="def-maineffect" class="theorem definition">
<p><span class="theorem-title"><strong>Definition 18.2 (Haupteffekte )</strong></span> Haupteffekte beschreiben den <strong>isolierten Einfluss</strong> einer unabhängigen Variable auf die abhängige Variable, unabhängig von anderen Variablen im Modell.</p>
</div>
<p>Im Rahmen eines linearen Modells, wird ein solcher Interaktionseffekt durch einen <em>multiplikativen</em> Term zwischen den beiden Variablen modelliert.</p>
<p><span class="math display">\[\begin{equation}
Y_{i} = \beta_0 + \beta_1 \times \textrm{bodymass}_i + \beta_2 \times \textrm{armspan}_i + \beta_3 \times \textrm{bodymass}_i \times \textrm{armspan}_i + \epsilon_i
\label{mlm-inter-model-ex}
\end{equation}\]</span></p>
<p>In der Formel <span class="math inline">\(\eqref{mlm-inter-model-ex}\)</span> ist neben den beiden Mdeollkoeffizienten <span class="math inline">\(\beta_1\)</span> und <span class="math inline">\(\beta_2\)</span> jetzt ein weitere Koeffizienten <span class="math inline">\(\beta_3\)</span> der den Interaktionseffekt abbildet. Die <span class="math inline">\(X\)</span>-Werte die diesem Modellkoeffizienten zugeordnet sind, berechnen sich aus Produkt aus den beiden beteiligten Prädiktorvariablen. In dem vorliegenden Handballbeispiel aus dem Produkt aus Armspannweite und Körpergewicht <code>body_mass</code> <span class="math inline">\(\times\)</span> <code>arm_span</code>. Dies ist der Interaktionseffekt.</p>
<p>Warum die Multiplikation zwischen den Prädiktorvariablen sinnvoll ist, wird etwas später genauer betrachtet.</p>
<section id="interaktionseffekte-in-lm" class="level3" data-number="18.2.1">
<h3 data-number="18.2.1" class="anchored" data-anchor-id="interaktionseffekte-in-lm"><span class="header-section-number">18.2.1</span> Interaktionseffekte in <code>lm()</code></h3>
<p>In <code>R</code> wird ein Interaktionseffekt in der Formel mittels eines <code>:</code> spezifiziert.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>mod_3 <span class="ot">&lt;-</span> <span class="fu">lm</span>(vel <span class="sc">~</span> body_mass_c <span class="sc">+</span> arm_span_c <span class="sc">+</span> body_mass_c<span class="sc">:</span>arm_span_c, handball) </span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Um sich etwas Tipparbeit zu sparen, kann auch die Kurzform <code>*</code> benutzet werden. Hier multipliziert <code>R</code> die beiden beteiligten Variablen selbst <em>aus</em>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>mod_3 <span class="ot">&lt;-</span> <span class="fu">lm</span>(vel <span class="sc">~</span> body_mass_c <span class="sc">*</span> arm_span_c, handball) </span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>D.h. die Funktion <code>lm()</code> multipliziert Terme der Form <code>A*B</code> in <code>A + B + A:B</code> aus.</p>
<p>Angewendet auf das Handballbeispiel folgt daraus die folgende Modellanpassung (siehe <a href="#tbl-mlm-inter-handball-mod3" class="quarto-xref">Tabelle&nbsp;<span>18.5</span></a>)</p>
<div class="cell">
<div id="tbl-mlm-inter-handball-mod3" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-mlm-inter-handball-mod3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabelle&nbsp;18.5: Modellfit der Handballdaten unter Momdell 3
</figcaption>
<div aria-describedby="tbl-mlm-inter-handball-mod3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="do-not-create-environment cell caption-top table table-sm table-striped small">
<caption>Modell 3</caption>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;"><span class="math inline">\(\hat{\beta}\)</span></th>
<th style="text-align: right;"><span class="math inline">\(s_e\)</span></th>
<th style="text-align: right;">t</th>
<th style="text-align: left;">p</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">(Intercept)</td>
<td style="text-align: right;">21.346</td>
<td style="text-align: right;">0.143</td>
<td style="text-align: right;">149.296</td>
<td style="text-align: left;">&lt;0.001</td>
</tr>
<tr class="even">
<td style="text-align: left;">body_mass_c</td>
<td style="text-align: right;">0.119</td>
<td style="text-align: right;">0.015</td>
<td style="text-align: right;">8.133</td>
<td style="text-align: left;">&lt;0.001</td>
</tr>
<tr class="odd">
<td style="text-align: left;">arm_span_c</td>
<td style="text-align: right;">0.083</td>
<td style="text-align: right;">0.019</td>
<td style="text-align: right;">4.380</td>
<td style="text-align: left;">&lt;0.001</td>
</tr>
<tr class="even">
<td style="text-align: left;">body_mass_c:arm_span_c</td>
<td style="text-align: right;">0.021</td>
<td style="text-align: right;">0.002</td>
<td style="text-align: right;">12.633</td>
<td style="text-align: left;">&lt;0.001</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span class="math inline">\(\hat{\sigma}\)</span></td>
<td style="text-align: right;">0.868</td>
<td style="text-align: right;"></td>
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<p>Bei Betrachtung der Residualvarianz <span class="math inline">\(\hat{\sigma}\)</span> ist zu beobachten, dass sich der halbiert hat. D.h das Interaktionsmodell scheint deutlich präziser den Zusammenhang zwischen den Prädiktorvariablen und der abhängigen Variablen abbilden zu können, als dies bei dem rein additiven Modell der Fall war. Zusätzlich haben sich die Standardfehler der beiden Steigungskoeffizienten für die <strong>Haupteffekte</strong> deutlich verringert (vgl. <a href="#tbl-mlm-inter-handball-mod2" class="quarto-xref">Tabelle&nbsp;<span>18.3</span></a>). Beide Koeffizienten sind nun statistisch signifikant geworden. Der neu dazugekommene Koeffizient für den Interaktionseffekt ist ebenfalls statistisch signifikant mit einem sehr kleinen Standardfehler. D.h die Hinzunahme des Interaktionseffekts hat in dem vorliegenden Beispiel dazu geführt, dass der Modellfit deutlich verbessert wurde. Im nächsten Schritt soll nun die Wirkung des Interaktionseffekt noch einmal deutlicher herausgearbeitet werden.</p>
</section>
</section>
<section id="koeffizienten-im-interaktionsmodell-verstehen" class="level2" data-number="18.3">
<h2 data-number="18.3" class="anchored" data-anchor-id="koeffizienten-im-interaktionsmodell-verstehen"><span class="header-section-number">18.3</span> Koeffizienten im Interaktionsmodell verstehen</h2>
<p>Im weiteren wird genauer betrachtet wie die Modellkoeffizienten und insbesondere der Interaktionseffekt <span class="math inline">\(\beta_3\)</span> interpretiert werden kann. Dazu werden zunächst die Vorhersagen <span class="math inline">\(\hat{y}_i\)</span> unter den beiden Modellen Modell 2, dem additiven Modell, und Modell 3, dem Interaktionsmodell, miteinander verglichen. Zur Erinnerung, beide Modell arbeiten mit zentrierten Prädiktorvariablen.</p>
<p>Um einen besseren Überblick über die Vorhersagen zu bekommen, ist es hilfreich die Daten zu vereinfachen indem nur drei verschiedene Werte für die Armspannweite <span class="math inline">\(as = \{-10,0,10\}\)</span> cm. D.h. einen hypothetischen Handballer mit der Durchschnittsspannweite, sowie jeweils einen mit <span class="math inline">\(10\)</span> cm kürzerer bzw. <span class="math inline">\(10\)</span> cm längerer Spannweite. Der gleiche Ansatz wird auf für die Körpermasse gewählt, indem hier ebenfalls drei verschiedenen Körpermassen <span class="math inline">\(bm = \{-2,0,2\}\)</span> Kg verwendet werden. D.h. eine Person mit durchschnittlicher Körpermasse und jeweils eine Person mit <span class="math inline">\(-2\)</span> und <span class="math inline">\(2\)</span> Kg leichter bzw. schwerer. Dies führt zu der folgenden Kombination von Prädiktorvariablen (siehe <a href="#tbl-mlm-inter-handball-xpred" class="quarto-xref">Tabelle&nbsp;<span>18.6</span></a>).</p>
<div class="cell">
<div id="tbl-mlm-inter-handball-xpred" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-mlm-inter-handball-xpred-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabelle&nbsp;18.6: Alle Kombinationen von Prädiktorvariablen.
</figcaption>
<div aria-describedby="tbl-mlm-inter-handball-xpred-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="do-not-create-environment cell caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: right;">Armspannweite</th>
<th style="text-align: right;">Körpermasse</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">-10</td>
<td style="text-align: right;">-2</td>
</tr>
<tr class="even">
<td style="text-align: right;">0</td>
<td style="text-align: right;">-2</td>
</tr>
<tr class="odd">
<td style="text-align: right;">10</td>
<td style="text-align: right;">-2</td>
</tr>
<tr class="even">
<td style="text-align: right;">-10</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: right;">10</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">-10</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="even">
<td style="text-align: right;">0</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td style="text-align: right;">10</td>
<td style="text-align: right;">2</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<p>Für diese Daten wird nun die vorhergesagten Wert <span class="math inline">\(\hat{y}_i\)</span> unter beiden Modellen berechnet und graphisch dargestellt (siehe <a href="#fig-mlm-inter-simple" class="quarto-xref">Abbildung&nbsp;<span>18.4</span></a>). Diese Art der Darstellung des Zusammenhangs zwischen <strong>einer</strong> Prädiktorvariable und der abhängigen Variable während weitere Prädiktorvariablen konstant gehalten werden, wird als <em>einfache Steigungen</em> bezeichnet.</p>
<div id="fig-mlm-inter-simple" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-mlm-inter-simple-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-mlm-inter-simple" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-mlm-inter-simple-1" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-mlm-inter-simple-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="mlm_interactions_files/figure-html/fig-mlm-inter-simple-1.png" class="img-fluid figure-img" data-ref-parent="fig-mlm-inter-simple" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-mlm-inter-simple-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) Vorhersage unter Modell 2
</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-mlm-inter-simple" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-mlm-inter-simple-2" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-mlm-inter-simple-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="mlm_interactions_files/figure-html/fig-mlm-inter-simple-2.png" class="img-fluid figure-img" data-ref-parent="fig-mlm-inter-simple" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-mlm-inter-simple-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) Vorhersage unter Modell 3
</figcaption>
</figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-mlm-inter-simple-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;18.4: Vergleich der Modellvorhersagen für Modell 2 und Modell 3.
</figcaption>
</figure>
</div>
<p>In <a href="#fig-mlm-inter-simple-1" class="quarto-xref">Abbildung&nbsp;<span>18.4 (a)</span></a> ist zu sehen, dass die vorhergesagten Werte <span class="math inline">\(\hat{y}_i\)</span> für verschiedene Körpermassen jeweils nur parallel gegeneinander verschoben sind. Da die Unterschiede zwischen den Körpermassen sich um jeweils <span class="math inline">\(2\)</span> Kg unterscheiden, sind für einen gegebenen Wert der Armspannweite die Abstände zwischen den Linien konstant um den Faktor <span class="math inline">\(\beta_{\text{body mass}} \times 2\)</span>. D.h. egal welchen Wert die Armspannweite einnimmt, der Zusammenhang der Körpermasse mit der Wurfgeschwindigkeit bleibt gleich.</p>
<p>Unter Modell 3 fallen die einfachen Steigung dagegen vollkommen anders aus (siehe <a href="#fig-mlm-inter-simple-2" class="quarto-xref">Abbildung&nbsp;<span>18.4 (b)</span></a>). Hier kann beobachtet werden, dass die Unterschiede zwischen den verschiedenen Armspannweiten davon abhängen wie schwer ein Handballer ist. Während bei kleinen Armspannweiten die Unterschiede eher gering ausfallen, werden die Unterschiede zwischen den drei gewählten Gewichtskategorien umso größer je größer die Armspannweite wird. Es handelt sich eben um einen Interaktionseffekt. Es ist weiter sehen, dass bei einer Armspannweite von <span class="math inline">\(-5\)</span> cm es sogar zum schneiden der einfachen Steigungen kommt. In diesem Fall führt dies dazu, dass sich die Anordnung der Wurfgeschwindigkeiten in Abhängigkeit von der Körpermasse umkehrt. Während bei Armspannweite von <span class="math inline">\(-10\)</span>cm eine leichtere Person die höchste Wurfgeschwindigkeit produziert, ist dies bei einer Armspannweite von <span class="math inline">\(+10\)</span>cm ein schwerere Person (in diesem Vergleich immer in Bezug auf die gewählten Wertebereiche).</p>
<p>Generell ist ein Interaktionseffekt dabei immer symmetrisch und hängt nicht davon ab, welche Variable als <span class="math inline">\(X\)</span>-Variable in dem Graphen verwendet wird. Wenn die Änderung der einen Variable <span class="math inline">\(A\)</span> davon abhängt welchen Wert die andere Variable <span class="math inline">\(B\)</span> hat, dann gilt dies auch anderes herum für die Veränderung von Variable <span class="math inline">\(B\)</span> in Abhängigkeit vom Wert der Variablen <span class="math inline">\(A\)</span>. Um diese <em>Symmetrie</em> zu verdeutlichen sind in <a href="#fig-mlm-inter-simple-02" class="quarto-xref">Abbildung&nbsp;<span>18.5</span></a> beide Möglichkeiten der Darstellung der einfachen Effekte nebeneinander dargestellt.</p>
<div id="fig-mlm-inter-simple-02" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-mlm-inter-simple-02-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-mlm-inter-simple-02" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-mlm-inter-simple-02-1" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-mlm-inter-simple-02-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="mlm_interactions_files/figure-html/fig-mlm-inter-simple-02-1.png" class="img-fluid figure-img" data-ref-parent="fig-mlm-inter-simple-02" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-mlm-inter-simple-02-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) Vorhersage unter Modell 3 mit Körpermasse auf der <span class="math inline">\(x\)</span>-Achse
</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-mlm-inter-simple-02" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-mlm-inter-simple-02-2" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-mlm-inter-simple-02-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="mlm_interactions_files/figure-html/fig-mlm-inter-simple-02-2.png" class="img-fluid figure-img" data-ref-parent="fig-mlm-inter-simple-02" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-mlm-inter-simple-02-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) Vorhersage unter Modell 3 mit Armspannweite auf der <span class="math inline">\(x\)</span>-Achse
</figcaption>
</figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-mlm-inter-simple-02-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;18.5: Vergleich der Modellvorhersagen für Modell 2 und Modell 3.
</figcaption>
</figure>
</div>
<p>In beiden Fällen ist ein Interaktionseffekt zu beobachten. Die genau Ausprägung der einfachen Steigungen ist dabei abhängig von Varianzen der Prädiktorvariablen, d.h. wie stark die Werte streuen, bzw. von de gewählten Einheiten.</p>
<section id="interaktionseffekte-deep-dive" class="level3" data-number="18.3.1">
<h3 data-number="18.3.1" class="anchored" data-anchor-id="interaktionseffekte-deep-dive"><span class="header-section-number">18.3.1</span> Interaktionseffekte deep-dive</h3>
<p>Als nächstes Versuchen soll untersucht werden, warum die Multiplikation der an der Interaktion beteiligten Prädiktorvariablen sinnvoll ist um die Interpretation der Koeffizienten in <a href="#tbl-mlm-inter-handball-mod3" class="quarto-xref">Tabelle&nbsp;<span>18.5</span></a> numerisch besser bedeuten zu können. In <a href="#fig-mlm-inter-mod3-coefs-1" class="quarto-xref">Abbildung&nbsp;<span>18.6</span></a> sind noch einmal die einfachen Steigungen für die Körpermasse in Abhängigkeit von der Armspannweite dargestellt.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-mlm-inter-mod3-coefs-1" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-mlm-inter-mod3-coefs-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="mlm_interactions_files/figure-html/fig-mlm-inter-mod3-coefs-1-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-mlm-inter-mod3-coefs-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;18.6: Einfache Steigungen für die Körpermasse
</figcaption>
</figure>
</div>
</div>
</div>
<p>Wie bereits beschrieben, es ist zu beobachten, dass der Zusammenhang zwischen der Wurfgeschwindigkeit und der Körpermasse von der gewählten Armspannweite abhängt. Um die Bedeutung der Koeffizienten in einen Interaktionsmodell besser zu verstehen, werden nun die einfachen Steiungen für die drei abgebildeten Graphen berechnet. D.h. es wird dreimal eine einfache lineare Regression berechnet. In <a href="#tbl-mlm-inter-mod3-coefs-1" class="quarto-xref">Tabelle&nbsp;<span>18.7</span></a> sind die dazugehörenden Steigungskoeffizienten für die einfachen Steigungen abgebildet. <span class="math inline">\(\beta_0\)</span> ist der <span class="math inline">\(y\)</span>-Achsenabschnitt für die jeweiligen Armspannweiten und <span class="math inline">\(\beta_1\)</span> die jeweiligen Steigungen.</p>
<div id="tbl-mlm-inter-mod3-coefs-1" class="quarto-layout-panel anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-mlm-inter-mod3-coefs-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabelle&nbsp;18.7: Einfache Steigungen und Modellkoeffizienten
</figcaption>
<div aria-describedby="tbl-mlm-inter-mod3-coefs-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="tbl-mlm-inter-mod3-coefs-1" style="flex-basis: 50.0%;justify-content: center;">
<div id="tbl-mlm-inter-mod3-coefs-1-1" class="do-not-create-environment quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-tbl figure">
<figcaption class="quarto-float-caption-top quarto-subfloat-caption quarto-subfloat-tbl" id="tbl-mlm-inter-mod3-coefs-1-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) Steigungskoeffizienten für die einfachen Steigungen.
</figcaption>
<div aria-describedby="tbl-mlm-inter-mod3-coefs-1-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table id="tbl-mlm-inter-mod3-coefs-1-1" class="do-not-create-environment caption-top table">
<thead>
<tr class="header">
<th style="text-align: left;">Armspannweite (zentriert)</th>
<th style="text-align: right;"><span class="math inline">\(\beta_0\)</span></th>
<th style="text-align: right;"><span class="math inline">\(\beta_1\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">10</td>
<td style="text-align: right;">22.178</td>
<td style="text-align: right;">0.326</td>
</tr>
<tr class="even">
<td style="text-align: left;">0</td>
<td style="text-align: right;">21.346</td>
<td style="text-align: right;">0.119</td>
</tr>
<tr class="odd">
<td style="text-align: left;">-10</td>
<td style="text-align: right;">20.514</td>
<td style="text-align: right;">-0.088</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="tbl-mlm-inter-mod3-coefs-1" style="flex-basis: 50.0%;justify-content: center;">
<div id="tbl-mlm-inter-mod3-coefs-1-2" class="do-not-create-environment quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-tbl figure">
<figcaption class="quarto-float-caption-top quarto-subfloat-caption quarto-subfloat-tbl" id="tbl-mlm-inter-mod3-coefs-1-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) Modellkoeffizienten unter Modell 3
</figcaption>
<div aria-describedby="tbl-mlm-inter-mod3-coefs-1-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table id="tbl-mlm-inter-mod3-coefs-1-2" class="do-not-create-environment caption-top table">
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;"><span class="math inline">\(\beta\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>(Intercept)</code></td>
<td style="text-align: right;">21.346</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>bm_c</code></td>
<td style="text-align: right;">0.119</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>as_c</code></td>
<td style="text-align: right;">0.083</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>bm_c:as_c</code></td>
<td style="text-align: right;">0.021</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
</div>
</div>
</div>
</figure>
</div>
<p>Entsprechend den Graphen in <a href="#fig-mlm-inter-mod3-coefs-1" class="quarto-xref">Abbildung&nbsp;<span>18.6</span></a> ist der Steigungskoeffizient für <span class="math inline">\(\beta_1\)</span> für die Armspannweiten <span class="math inline">\(0\)</span> und <span class="math inline">\(10\)</span> positive, während er bei der Armspannweite <span class="math inline">\(-10\)</span> negativ ist. Ein Vergleich dieser Wert mit denjenigen aus dem Interaktionsmodell in <a href="#tbl-mlm-inter-mod3-coefs-1-2" class="quarto-xref">Tabelle&nbsp;<span>18.7 (b)</span></a> zeigt, dass die Werte unterschiedlich sind. Um nun nachzuvollziehen, dass die Werte in <a href="#tbl-mlm-inter-mod3-coefs-1-1" class="quarto-xref">Tabelle&nbsp;<span>18.7 (a)</span></a> aus denjenigen in <a href="#tbl-mlm-inter-mod3-coefs-1-2" class="quarto-xref">Tabelle&nbsp;<span>18.7 (b)</span></a> resultieren sind ein paar Vereinfachungen notwendig.</p>
<p>Sei zunächst einmal die zentrierte Körpermasse auf <span class="math inline">\(\text{bodymass} = 0\)</span>. D.h. in <a href="#fig-mlm-inter-mod3-coefs-1" class="quarto-xref">Abbildung&nbsp;<span>18.6</span></a> bewegen wir uns entlang der eingezeichneten, grünen Linie. Wenn ein Handballer nun ebenfalls eine durchschnittliche Armspannweite hat, also <span class="math inline">\(\text{armspan} = 0\)</span> dann wird eine Wurfgeschwindigkeit von <span class="math inline">\(v = 21.346\)</span> vorhergesagt. D.h. <span class="math inline">\(\text{bodymass} = 0\)</span> und <span class="math inline">\(\text{armspan} = 0\)</span> also genau der <span class="math inline">\(Y\)</span>-Achsenabschnitt in Modell 3. Sei nun ein Handballer mit durschnittlicher Körpermasse aber einer Armspannweite von <span class="math inline">\(+10\)</span> cm also <span class="math inline">\(cm = 10\)</span> gegeben. In <a href="#fig-mlm-inter-mod3-coefs-1" class="quarto-xref">Abbildung&nbsp;<span>18.6</span></a> würde das einer vertikalen Beweung entlang der grünen Linie nach oben entsprechen. In Modellkoeffizienten gesprochen bedeutet dies:</p>
<p><span class="math display">\[\begin{align*}
\hat{y} &amp;= 21.346 + 0.119 \cdot 0 + 0.083 \cdot 10 + 0.021 \cdot 0 \cdot 10 \\
&amp;= 21.346 + 0.83 = 22.175
\end{align*}\]</span></p>
<p>Der Wert ist, bis auf ein paar Rundungsfehler, dem <span class="math inline">\(Y\)</span>-Achsenabschnitt <span class="math inline">\(\beta_0\)</span> in <a href="#tbl-mlm-inter-mod3-coefs-1-1" class="quarto-xref">Tabelle&nbsp;<span>18.7 (a)</span></a> unter Armspannweite <span class="math inline">\(=10\)</span> gleich, <span class="math inline">\(22.175 \approx 22.178\)</span>. Das gleiche Prinzip kann ebenfalls angewendet werden, wenn die Armspannweite um <span class="math inline">\(10\)</span>cm verkürzt wird. D.h. in <a href="#fig-mlm-inter-mod3-coefs-1" class="quarto-xref">Abbildung&nbsp;<span>18.6</span></a> entlang der grünen Linie nach unten. In Modellkoeffizienten resultiert dies in:</p>
<p><span class="math display">\[\begin{align*}
\hat{y} &amp;= 21.346 + 0.119 \cdot 0 + 0.083 \cdot -10 + 0.021 \cdot 0 \cdot 10 \\
&amp;= 21.346 - 0.83 = 20.516
\end{align*}\]</span></p>
<p>Dies entspricht wieder, bis auf Rundungsfehler, dem <span class="math inline">\(Y\)</span>-Achsenabschnitt in <a href="#tbl-mlm-inter-mod3-coefs-1-1" class="quarto-xref">Tabelle&nbsp;<span>18.7 (a)</span></a> unter dem Eintrag für Armspannweite <span class="math inline">\(-10\)</span> (<span class="math inline">\(20.516 \approx 20.514\)</span>).</p>
<p>Sei nun ein Handballer mit einer Armspannweite von <span class="math inline">\(as = 0\)</span> gegeben. Dann können die Koeffizienten in <a href="#tbl-mlm-inter-mod3-coefs-1-2" class="quarto-xref">Tabelle&nbsp;<span>18.7 (b)</span></a> direkt abgelesen werden. Die Wurfgeschwindigkeit verändert sich somit mit der Körpermasse über den Koeffizienten <span class="math inline">\(\beta_{bm_c} = 0.119\)</span>. Eingesetzt in die Modellgleichung führt dies zu:</p>
<p><span class="math display">\[\begin{align*}
\hat{y} &amp;= 21.346 + 0.119 \cdot bm_c + 0.083 \cdot 0 + 0.021 \cdot bm_c \cdot 0 \\
&amp;= 21.346 + 0.119 \cdot bm_c
\end{align*}\]</span></p>
<p>Als nächstes wird der Fall betrachtet, wenn beide Prädiktorvariablen <span class="math inline">\(as\neq 0\)</span> und <span class="math inline">\(bm\neq 0\)</span> sind. Sei zum Beispiel <span class="math inline">\(as = 10\)</span>. Wie verändert sich der vorhergesagte Wert <span class="math inline">\(\hat{y}_i\)</span> mit der Körpermasse <span class="math inline">\(bm_c\)</span>. <span class="math inline">\(bm_c\)</span> bleibt offen um die Steigungsgleichung zu bestimmen. Wieder eingesetzt in das Modell ergibt dies:</p>
<p><span class="math display">\[\begin{align*}
\hat{y} &amp;= 21.346 + 0.119 \cdot bm_c + 0.083 \cdot 10 + 0.021 \cdot bm_c \cdot 10 \\
&amp;= 21.346 + 0.83 + 0.119 \cdot bm_c + 0.21 \cdot bm_c \\
&amp;= 22.175 + (0.119 + 0.21) \cdot bm_c \\
&amp;= 22.175 + 0.329 \cdot bm_c
\end{align*}\]</span></p>
<p>Bis auf ein paar Rundungsfehler, werden die Steigungskoeffizienten der Geradengleichung in <a href="#tbl-mlm-inter-mod3-coefs-1-1" class="quarto-xref">Tabelle&nbsp;<span>18.7 (a)</span></a> für den Eintrag <code>as = 10</code> erhalten.</p>
<p>In Bezug auf die Interpretation der Modellkoeffizienten ergibt sich somit das folgende Bild. Der Modellkoeffizient <span class="math inline">\(\beta_0\)</span> beschreibt den <span class="math inline">\(y\)</span>-Achsenabschnitt wenn alle Prädiktorvariablen den Wert <span class="math inline">\(0\)</span> annehmen. Wenn einer der beiden Prädiktorvariablen <span class="math inline">\(0\)</span> ist, dann beschreibt der andere Modellkoeffizient die Verschiebung des <span class="math inline">\(Y\)</span>-Achsenabschnitts der <em>einfachen</em> Gerade deren Steigung durch den Modellkoeffizienten beschrieben wird. Wenn beide Prädiktorvariablen <span class="math inline">\(neq 0\)</span> sind, dann kommt erst der Interaktionskoeffizient ins Spiel und führt zu einer Veränderung der einfachen Steigung in Abhängigkeit von der Kombination der Prädiktorvariablen.</p>
<div id="exr-interaction-coeffs" class="theorem exercise">
<p><span class="theorem-title"><strong>Übungsaufgabe 18.1</strong></span> Versuche anhand der Koeffizienten in <a href="#tbl-mlm-inter-mod3-coefs-1-2" class="quarto-xref">Tabelle&nbsp;<span>18.7 (b)</span></a> die einfache Steigungsgleichung für <span class="math inline">\(as_c = -10\)</span> zu erhalten.</p>
</div>
<p>Zusammenfassend lässt sich die folgende Interpretation der Koeffizienten in einem Interaktionsmodell mit zwei Prädiktorvariablen formulieren.</p>
<p><span class="math display">\[\begin{equation*}
Y = b_0 + b_1 \cdot x_1 + b_2 \cdot x_2 + b_3 \cdot x_1 \cdot x_2 + \epsilon_i
\end{equation*}\]</span></p>
<ul>
<li><span class="math inline">\(b_0\)</span>: (y-Achsenabschnitt) der Wert von <span class="math inline">\(\hat{Y}\)</span> wenn <span class="math inline">\(x_1 = 0\)</span> und <span class="math inline">\(x_2 = 0\)</span> gilt.</li>
<li><span class="math inline">\(b_1\)</span>: Der Unterschied in <span class="math inline">\(\hat{Y}\)</span> wenn zwei Objekte sich in <span class="math inline">\(x_1\)</span> um eine Einheit unterscheiden und <span class="math inline">\(x_2 = 0\)</span> ist (Haupteffekt).</li>
<li><span class="math inline">\(b_2\)</span>: Der Unterschied in <span class="math inline">\(\hat{Y}\)</span> wenn zwei Objekte sich in <span class="math inline">\(x_2\)</span> um eine Einheit unterscheiden und <span class="math inline">\(x_1 = 0\)</span> ist (Haupteffekt).</li>
<li><span class="math inline">\(b_3\)</span>: (Interaktionskoeffizient) Die Veränderung des Effekts von <span class="math inline">\(x_1\)</span> auf <span class="math inline">\(\hat{Y}\)</span> wenn <span class="math inline">\(x_2\)</span> um eine Einheit größer wird bzw. genau andersherum für <span class="math inline">\(x_2\)</span>.</li>
</ul>
</section>
</section>
<section id="die-form-der-modellfläche-unter-dem-additiven-und-der-interaktionsmodell" class="level2" data-number="18.4">
<h2 data-number="18.4" class="anchored" data-anchor-id="die-form-der-modellfläche-unter-dem-additiven-und-der-interaktionsmodell"><span class="header-section-number">18.4</span> Die Form der Modellfläche unter dem additiven und der Interaktionsmodell</h2>
<p>Abschließend nun eine Betrachtung der resultierenden Flächen unter additiven und dem Interaktionsmodell. In <a href="#fig-mlm-inter-resid-plane" class="quarto-xref">Abbildung&nbsp;<span>18.7</span></a> sind die gefitteten Flächen und die Residuen unter den beiden Modellen abgebildet.</p>
<div id="fig-mlm-inter-resid-plane" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-mlm-inter-resid-plane-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-mlm-inter-resid-plane" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-mlm-inter-resid-plane-1" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-mlm-inter-resid-plane-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="mlm_interactions_files/figure-html/fig-mlm-inter-resid-plane-1.png" class="img-fluid figure-img" data-ref-parent="fig-mlm-inter-resid-plane" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-mlm-inter-resid-plane-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) 3D Streudiagramm des Interaktionsmodells und gefittet Ebene unter Model 1
</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-mlm-inter-resid-plane" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-mlm-inter-resid-plane-2" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-mlm-inter-resid-plane-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="mlm_interactions_files/figure-html/fig-mlm-inter-resid-plane-2.png" class="img-fluid figure-img" data-ref-parent="fig-mlm-inter-resid-plane" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-mlm-inter-resid-plane-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) 3D Streudiagramm des Interaktionsmodells und gefittet Fläche unter Model 2
</figcaption>
</figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-mlm-inter-resid-plane-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;18.7: Vergleich der gefitteten Ebenen in den beiden Modellen.
</figcaption>
</figure>
</div>
<p>Unter dem Interaktionsmodell ist die gefittete Fläche keine einfache Ebene mehr, sondern durch die Hinzunahme des Interaktionseffekts ähnelt die Fläche nun eher einem Sattel. D.h. durch die Integration von Interaktionseffekte zwischen den Prädiktorvariablen können deutlich komplizierte Zusammenhänge zwischen den Prädiktorvariablen und der abhängigen Variable modellieren werden. Die Komplexität erhöht sich entsprechend mit der Zahl der Prädiktorvariablen und den möglichen Interaktion zwischen diesen.</p>
<p>Zurückkommend auf unser Ausgangsbeispiel mit den Handballdaten, kann entsprechend die Auswirkung auf den die Modellanpassung analysiert werden. Dazu ein Vergleich der beiden Residuenplots (siehe <a href="#fig-mlm-inter-resid-comparison" class="quarto-xref">Abbildung&nbsp;<span>18.8</span></a>).</p>
<div id="fig-mlm-inter-resid-comparison" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-mlm-inter-resid-comparison-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-mlm-inter-resid-comparison" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-mlm-inter-resid-comparison-1" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-mlm-inter-resid-comparison-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="mlm_interactions_files/figure-html/fig-mlm-inter-resid-comparison-1.png" class="img-fluid figure-img" data-ref-parent="fig-mlm-inter-resid-comparison" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-mlm-inter-resid-comparison-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) Residuen im additiven Modell
</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-mlm-inter-resid-comparison" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-mlm-inter-resid-comparison-2" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-mlm-inter-resid-comparison-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="mlm_interactions_files/figure-html/fig-mlm-inter-resid-comparison-2.png" class="img-fluid figure-img" data-ref-parent="fig-mlm-inter-resid-comparison" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-mlm-inter-resid-comparison-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) Residuen im Interaktionsmodell
</figcaption>
</figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-mlm-inter-resid-comparison-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;18.8: Vergleich der Residuen zwischen Modell 2 und Modell 3.
</figcaption>
</figure>
</div>
<p>Es ist zu beobachten, dass in <a href="#fig-mlm-inter-resid-comparison-2" class="quarto-xref">Abbildung&nbsp;<span>18.8 (b)</span></a> die Struktur, die im additiven Modell in <a href="#fig-mlm-inter-resid-comparison-1" class="quarto-xref">Abbildung&nbsp;<span>18.8 (a)</span></a> für die Residuen , nun nicht mehr vorhanden ist. Ähnlich verhält sich auch der Vergleich für die die qq-Plots der Residuen (siehe <a href="#fig-mlm-inter-qq-comparison" class="quarto-xref">Abbildung&nbsp;<span>18.9</span></a>).</p>
<div id="fig-mlm-inter-qq-comparison" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-mlm-inter-qq-comparison-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-mlm-inter-qq-comparison" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-mlm-inter-qq-comparison-1" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-mlm-inter-qq-comparison-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="mlm_interactions_files/figure-html/fig-mlm-inter-qq-comparison-1.png" class="img-fluid figure-img" data-ref-parent="fig-mlm-inter-qq-comparison" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-mlm-inter-qq-comparison-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) qq-Plot für das additive Modell
</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-mlm-inter-qq-comparison" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-mlm-inter-qq-comparison-2" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-mlm-inter-qq-comparison-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="mlm_interactions_files/figure-html/fig-mlm-inter-qq-comparison-2.png" class="img-fluid figure-img" data-ref-parent="fig-mlm-inter-qq-comparison" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-mlm-inter-qq-comparison-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) qq-Plot für das Interaktionsmodell
</figcaption>
</figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-mlm-inter-qq-comparison-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;18.9: Vergleich der Residuen zwischen Modell 2 und Modell 3.
</figcaption>
</figure>
</div>
<p>Dazu nun ein Vergleich der weiteren Performanceparameter.</p>
<div class="cell">
<div id="tbl-stats-int-model-performance" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-stats-int-model-performance-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabelle&nbsp;18.8: Vergleich der Modellperformance zwischen Model 2 und Model 3
</figcaption>
<div aria-describedby="tbl-stats-int-model-performance-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="do-not-create-environment cell caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">Name</th>
<th style="text-align: left;">Model</th>
<th style="text-align: right;">R2</th>
<th style="text-align: right;">R2_adjusted</th>
<th style="text-align: right;">RMSE</th>
<th style="text-align: right;">Sigma</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">mod_2</td>
<td style="text-align: left;">lm</td>
<td style="text-align: right;">0.291</td>
<td style="text-align: right;">0.252</td>
<td style="text-align: right;">1.919</td>
<td style="text-align: right;">1.996</td>
</tr>
<tr class="even">
<td style="text-align: left;">mod_3</td>
<td style="text-align: left;">lm</td>
<td style="text-align: right;">0.869</td>
<td style="text-align: right;">0.859</td>
<td style="text-align: right;">0.824</td>
<td style="text-align: right;">0.868</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<p>Insgesamt sind durch die Hinzunahme des Interaktionseffekt nicht nur die Standardfehler und der Residualfehler verringert worden, sondern das Modell fittet die Daten auch deutlich besser als das additive Modell. Dies ist natürlich nicht immer der Fall, sondern hängt eng mit den jeweiligen Daten zusammen.</p>
</section>
<section id="modelmatrix-in-r-unter-dem-interaktionsmodell" class="level2" data-number="18.5">
<h2 data-number="18.5" class="anchored" data-anchor-id="modelmatrix-in-r-unter-dem-interaktionsmodell"><span class="header-section-number">18.5</span> Modelmatrix in <code>R</code> unter dem Interaktionsmodell</h2>
<p>Um die Modellmatrix bei Interaktionsmodell sei wieder der einfache Datensatz aus dem letzten Kapitel genommen.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>,<span class="fl">2.5</span>,<span class="dv">7</span>),</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">x_1 =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>,</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">x_2=</span> <span class="fu">c</span>(<span class="dv">11</span>,<span class="dv">11</span>,<span class="dv">14</span>,<span class="dv">13</span>) </span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Die Anwendung der Funktion <code>model.matrix()</code> mit einem Interaktionsterm zwischen <code>x_1</code> und <code>x_2</code> führt zu folgender Darstellung.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">model.matrix</span>(<span class="sc">~</span>x_1 <span class="sc">+</span> x_2 <span class="sc">+</span> x_1<span class="sc">:</span>x_2, df)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  (Intercept) x_1 x_2 x_1:x_2
1           1   1  11      11
2           1   2  11      22
3           1   3  14      42
4           1   4  13      52
attr(,"assign")
[1] 0 1 2 3</code></pre>
</div>
</div>
<p>Es ist zu beobachten, dass eine weitere Spalte für den Interaktionsterm zur Modellmatrize hinzugefügt wurde. Die Werte sind dabei genau das Ergebnis der Multiplikation zwischen den Werten von <code>x_1</code> und <code>x_2</code>.</p>
<p>Wie oben schon erwähnt führt <code>~x_1 * x_2</code> zum gleichem Ergebnis.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">model.matrix</span>(<span class="sc">~</span>x_1 <span class="sc">*</span> x_2, df)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  (Intercept) x_1 x_2 x_1:x_2
1           1   1  11      11
2           1   2  11      22
3           1   3  14      42
4           1   4  13      52
attr(,"assign")
[1] 0 1 2 3</code></pre>
</div>
</div>
</section>
<section id="take-away" class="level2" data-number="18.6">
<h2 data-number="18.6" class="anchored" data-anchor-id="take-away"><span class="header-section-number">18.6</span> Take-away</h2>
<p>Das Interaktionsmodell:</p>
<ul>
<li>Erhöht die Flexibilität des linearen Modells.</li>
<li>Bei Interaktionen hängt der Einfluss der einzelnen Variablen immer von den Werten der anderen Variablen ab.</li>
<li>Achtung: Interpretation der einfachen Haupteffekte oft nicht mehr möglich bzw. sinnvoll!</li>
</ul>
</section>
<section id="einfluss-der-zentrierung-auf-die-koeffizienten-im-interaktionsmodell-advanced" class="level2" data-number="18.7">
<h2 data-number="18.7" class="anchored" data-anchor-id="einfluss-der-zentrierung-auf-die-koeffizienten-im-interaktionsmodell-advanced"><span class="header-section-number">18.7</span> Einfluss der Zentrierung auf die Koeffizienten im Interaktionsmodell (advanced)</h2>
<p>Schauen wir uns noch zum Abschluss noch an, was algebraisch mit dem Koeffizienten im Interaktionsmodell passiert wenn die Prädiktorvariablen <span class="math inline">\(x_{ki}\)</span>s zentriert werden.</p>
<p><span class="math display">\[\begin{align*}
y_i &amp;= \beta_0 + \beta_1 (x_{1i} - \bar{x}_1) + \beta_2 (x_{2i} - \bar{x}_2) + \beta_3 (x_{1i}-\bar{x}_1)(x_{2i}-\bar{x}_2) \\
&amp;= \beta_0 + \beta_1 x_{1i} - \beta_1 \bar{x}_1 + \beta_2 x_{2i} - \beta_2 \bar{x}_2 + \beta_3 x_{1i} x_{2i} - \beta_3 x_{1i} \bar{x}_2 - \beta_3 \bar{x}_1 x_{2i} + \beta_3 \bar{x}_1 \bar{x}_2 \\
&amp;= \beta_0 - \beta_1 \bar{x}_1 - \beta_2 \bar{x}_2 + \beta_3 \bar{x}_1 \bar{x}_2 + \beta_1 x_{1i}- \beta_3 \bar{x}_2 x_{1i} + \beta_2 x_{2i} - \beta_3 \bar{x}_1 x_{2i} + \beta_3 x_{1i} x_{2i} \\
&amp;= \underbrace{\beta_0 - \beta_1 \bar{x}_1 - \beta_2 \bar{x}_2 + \beta_3 \bar{x}_1 \bar{x}_2}_{\beta_0} + \underbrace{(\beta_1 - \beta_3 \bar{x}_2) x_{1i}}_{\beta_1 x_{1i}} + \underbrace{(\beta_2 - \beta_3 \bar{x}_1) x_{2i}}_{\beta_2 x_{2i}} + \beta_3 x_{1i} x_{2i}
\end{align*}\]</span></p>
<p>Wir sehen, dass der Interaktionsterm tatsächlich gleich ist unter beiden Modellen. Dagegen unterscheiden sich die Koeffizienten der Haupteffekte deutlich voneinander. Der Übergang vom zentrierten zum unzentrierten Modell ist dabei nicht immer gleich, sondern hängt von den jeweiligen Werten dern Daten ab.</p>
</section>
<section id="zum-nacharbeiten" class="level2" data-number="18.8">
<h2 data-number="18.8" class="anchored" data-anchor-id="zum-nacharbeiten"><span class="header-section-number">18.8</span> Zum Nacharbeiten</h2>
<p><span class="citation" data-cites="kutner2005">Kutner u.&nbsp;a. (<a href="references.html#ref-kutner2005" role="doc-biblioref">2005, p.306–313</a>)</span></p>


<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list" style="display: none">
<div id="ref-debanne2011" class="csl-entry" role="listitem">
Debanne, Thierry, und Guillaume Laffaye. 2011. <span>„Predicting the throwing velocity of the ball in handball with anthropometric variables and isotonic tests“</span>. <em>Journal of Sports Sciences</em> 29 (7): 705–13.
</div>
<div id="ref-kutner2005" class="csl-entry" role="listitem">
Kutner, Michael H, Christopher J Nachtsheim, John Neter, und William Li. 2005. <em>Applied Linear Statistical Models</em>. 5. Aufl. McGraw-Hill Irwin New York.
</div>
</div>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Kopiert");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Kopiert");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./mlm_basics.html" class="pagination-link" aria-label="Einführung">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Einführung</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./mlm_dummy_coding.html" class="pagination-link" aria-label="Integration von nominalen Variablen">
        <span class="nav-page-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Integration von nominalen Variablen</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>