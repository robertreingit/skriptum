<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="de" xml:lang="de"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>19&nbsp; Integration von nominalen Variablen – Skriptum - Fortgeschrittene Statistik</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./mlm_hierarchies.html" rel="next">
<link href="./mlm_interactions.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-8da5b4427184b79ecddefad3d342027e.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "Keine Treffer",
    "search-matching-documents-text": "Treffer",
    "search-copy-link-title": "Link in die Suche kopieren",
    "search-hide-matches-text": "Zusätzliche Treffer verbergen",
    "search-more-match-text": "weitere Treffer in diesem Dokument",
    "search-more-matches-text": "weitere Treffer in diesem Dokument",
    "search-clear-button-title": "Zurücksetzen",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Abbrechen",
    "search-submit-button-title": "Abschicken",
    "search-label": "Suchen"
  }
}</script>
<script>

  MathJax = {

    tex: {

      tags: 'ams'  // should be 'ams', 'none', or 'all'

    }

  };

</script>
<script src="site_libs/kePrint-0.0.1/kePrint.js"></script>

<link href="site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">


  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Seitenleiste umschalten" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./mlm_title.html">Multiple Regression</a></li><li class="breadcrumb-item"><a href="./mlm_dummy_coding.html"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Integration von nominalen Variablen</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Seitenleiste umschalten" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Suchen" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Skriptum - Fortgeschrittene Statistik</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Suchen"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Vorwort</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./r_startup.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Eine Einführung in die Programmiersprache R</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./r_intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Eine Übersicht über <code>R</code></span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./r_vars_types.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Variablen und Datentypen in <code>R</code></span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./r_flowcontrol.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Ablaufkontrolle</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./r_functions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Funktionen in <code>R</code></span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./r_tidyverse.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Datenverarbeitung mit <code>tidyverse</code></span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./r_visualization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Datenvisualisierung mit <code>ggplot2</code></span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./r_literate_programming.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Literate programming in <code>R</code></span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./stats_title.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Statistik - Die Grundlagen</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stats_basics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Eine kleine Welt der Unsicherheit</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stats_significance.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Statistische Signifikanz, p-Wert und Power</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stats_estimation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Parameterschätzung</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stats_distributions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Theoretische Verteilungen</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./stats_hypotheses.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Weitere Grundlagen der Statistik</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./slm_title.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Das einfache Regressionmodell</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./slm_basics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Einführung</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./slm_inference.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Inferenz</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./slm_model_fit.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Modellfit</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./slm_prediction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Vorhersage</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./mlm_title.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Multiple Regression</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./mlm_basics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Einführung</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./mlm_interactions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Interaktionseffekte</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./mlm_dummy_coding.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Integration von nominalen Variablen</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./mlm_hierarchies.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Modellhierarchien</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./mlm_prediction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Vorhersagen bei der multiple linearen Regression</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./mlm_logistic.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Logistische Regression</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./ed_title.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Experimentelles Design</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ed_basics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Einführung</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ed_reliability.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Reliabilität</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ed_crd.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Completely Randomized Design</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ed_linear_contrasts.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Lineare Kontraste</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ed_crfd.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">Completely Randomized Factorial Design</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ed_ancova.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">ANCOVA</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ed_crbd.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">Block Design</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ed_irbd.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">30</span>&nbsp; <span class="chapter-title">Incomplete Randomized Block Design</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ed_split_plot.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">31</span>&nbsp; <span class="chapter-title">Split-plot Design</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ed_cross_over.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">32</span>&nbsp; <span class="chapter-title">Cross-over Design</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./appendix_math.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Mathematische Grundlagen</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Literatur</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Inhaltsverzeichnis</h2>
   
  <ul>
  <li><a href="#vergleich-von-zwei-unabhängigen-gruppen" id="toc-vergleich-von-zwei-unabhängigen-gruppen" class="nav-link active" data-scroll-target="#vergleich-von-zwei-unabhängigen-gruppen"><span class="header-section-number">19.1</span> Vergleich von zwei unabhängigen Gruppen</a></li>
  <li><a href="#nominale-variablen-in-r" id="toc-nominale-variablen-in-r" class="nav-link" data-scroll-target="#nominale-variablen-in-r"><span class="header-section-number">19.2</span> Nominale Variablen in <code>R</code></a></li>
  <li><a href="#vergleich-von-zwei-gruppen-continued" id="toc-vergleich-von-zwei-gruppen-continued" class="nav-link" data-scroll-target="#vergleich-von-zwei-gruppen-continued"><span class="header-section-number">19.3</span> Vergleich von zwei Gruppen (continued)</a>
  <ul class="collapse">
  <li><a href="#verwendung-von-indikatorvariablen-in-lm" id="toc-verwendung-von-indikatorvariablen-in-lm" class="nav-link" data-scroll-target="#verwendung-von-indikatorvariablen-in-lm"><span class="header-section-number">19.3.1</span> Verwendung von Indikatorvariablen in <code>lm()</code></a></li>
  </ul></li>
  <li><a href="#dummyvariablen-bei-mehr-als-zwei-faktorstufen" id="toc-dummyvariablen-bei-mehr-als-zwei-faktorstufen" class="nav-link" data-scroll-target="#dummyvariablen-bei-mehr-als-zwei-faktorstufen"><span class="header-section-number">19.4</span> Dummyvariablen bei mehr als zwei Faktorstufen</a></li>
  <li><a href="#kombination-von-kontinuierlichen-und-nominalen-prädiktorvariablen" id="toc-kombination-von-kontinuierlichen-und-nominalen-prädiktorvariablen" class="nav-link" data-scroll-target="#kombination-von-kontinuierlichen-und-nominalen-prädiktorvariablen"><span class="header-section-number">19.5</span> Kombination von kontinuierlichen und nominalen Prädiktorvariablen</a></li>
  <li><a href="#verschiedene-kodierschemas-für-die-dummy-variablen." id="toc-verschiedene-kodierschemas-für-die-dummy-variablen." class="nav-link" data-scroll-target="#verschiedene-kodierschemas-für-die-dummy-variablen."><span class="header-section-number">19.6</span> Verschiedene Kodierschemas für die Dummy-Variablen.</a>
  <ul class="collapse">
  <li><a href="#treatment-kodierung" id="toc-treatment-kodierung" class="nav-link" data-scroll-target="#treatment-kodierung"><span class="header-section-number">19.6.1</span> Treatment-Kodierung</a></li>
  <li><a href="#sum-to-zero-kodierung" id="toc-sum-to-zero-kodierung" class="nav-link" data-scroll-target="#sum-to-zero-kodierung"><span class="header-section-number">19.6.2</span> Sum-to-zero Kodierung</a></li>
  <li><a href="#differenzkodierung" id="toc-differenzkodierung" class="nav-link" data-scroll-target="#differenzkodierung"><span class="header-section-number">19.6.3</span> Differenzkodierung</a></li>
  <li><a href="#zusammenfassung" id="toc-zusammenfassung" class="nav-link" data-scroll-target="#zusammenfassung"><span class="header-section-number">19.6.4</span> Zusammenfassung</a></li>
  </ul></li>
  <li><a href="#zusammenfassung-1" id="toc-zusammenfassung-1" class="nav-link" data-scroll-target="#zusammenfassung-1"><span class="header-section-number">19.7</span> Zusammenfassung</a></li>
  <li><a href="#herleitung-der-identität-von-t-test-und-linearen-modell-optional" id="toc-herleitung-der-identität-von-t-test-und-linearen-modell-optional" class="nav-link" data-scroll-target="#herleitung-der-identität-von-t-test-und-linearen-modell-optional"><span class="header-section-number">19.8</span> Herleitung der Identität von t-Test und linearen Modell (optional)</a></li>
  <li><a href="#zum-nach--und-weiterlesen" id="toc-zum-nach--und-weiterlesen" class="nav-link" data-scroll-target="#zum-nach--und-weiterlesen"><span class="header-section-number">19.9</span> Zum Nach- und Weiterlesen</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./mlm_title.html">Multiple Regression</a></li><li class="breadcrumb-item"><a href="./mlm_dummy_coding.html"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Integration von nominalen Variablen</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Integration von nominalen Variablen</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>In den bishergen Betrachtungen zur multiplen linearen Regression sind nur kontinuierliche, beziehungsweise metrische Variablen als Prädiktorvariablen verwendet worden. Im Folgenden werden gezeigt, dass mit einem kleinem Trick genauso nominale Variablen, also z.B. TREATMENT versus CONTROL, in das Modell integriert werden können. Dabei wird sich zeigen, dass dadurch im Prinzip keine fundamental neuen Konzept erlernt werden müssen. Die bisherige Betrachtungsweise von Modellparametern als Steigungen von Geraden bzw. Ebenen ist immer noch ausreichend um die Modellparameter interpretieren zu können. Der Einstieg beginnt zunächst mit dem kanonischen Vergleich von zwei unabhängigen Gruppen.</p>
<section id="vergleich-von-zwei-unabhängigen-gruppen" class="level2" data-number="19.1">
<h2 data-number="19.1" class="anchored" data-anchor-id="vergleich-von-zwei-unabhängigen-gruppen"><span class="header-section-number">19.1</span> Vergleich von zwei unabhängigen Gruppen</h2>
<p>Es sollen im Folgenden die Unterschiede zwischen Männern und Frauen in Bezug auf die Körpergröße statistisch untersuchen werden. In <a href="#fig-mlm-dummy-gender" class="quarto-xref">Abbildung&nbsp;<span>19.1</span></a> ist ein hypothetischer Datensatz von Körpergrößen von Frauen und Männern abgebildet. Der Datensatz ist so konstruiert, dass Männer im Mittel größer als Frauen sind.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-mlm-dummy-gender" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-mlm-dummy-gender-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="mlm_dummy_coding_files/figure-html/fig-mlm-dummy-gender-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-mlm-dummy-gender-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;19.1: Simulierte Daten: Verteilung von Körpergrößen nach Geschlecht für Männer (m) und Frauen (f). Rote Punkte sind individuelle Datenpunkte
</figcaption>
</figure>
</div>
</div>
</div>
<p>In <a href="#tbl-mlm-dummy-gender" class="quarto-xref">Tabelle&nbsp;<span>19.1</span></a> ist ein Ausschnitt der Daten tabellarisch dargestellt. Die Daten sind unterteilt in zwei Datenspalten. In der ersten Spalte stehen die Körpergrößen, während in der zweiten Spalte die nominale Variable <code>gender</code> steht. Als eine nominale Variable nimmt sie entweder den Wert <code>m</code> für Männer oder <code>f</code> für Frauen an.</p>
<div class="cell">
<div id="tbl-mlm-dummy-gender" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-mlm-dummy-gender-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabelle&nbsp;19.1: Ausschnitt aus den Daten.
</figcaption>
<div aria-describedby="tbl-mlm-dummy-gender-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="do-not-create-environment cell caption-top table table-sm table-striped small">
<caption>Ausschnitt aus den Daten</caption>
<thead>
<tr class="header">
<th style="text-align: right;">cm</th>
<th style="text-align: left;">gender</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">174.4</td>
<td style="text-align: left;">m</td>
</tr>
<tr class="even">
<td style="text-align: right;">177.7</td>
<td style="text-align: left;">m</td>
</tr>
<tr class="odd">
<td style="text-align: right;">195.6</td>
<td style="text-align: left;">m</td>
</tr>
<tr class="even">
<td style="text-align: right;">171.3</td>
<td style="text-align: left;">f</td>
</tr>
<tr class="odd">
<td style="text-align: right;">164.0</td>
<td style="text-align: left;">f</td>
</tr>
<tr class="even">
<td style="text-align: right;">176.0</td>
<td style="text-align: left;">f</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<p>In <a href="#tbl-mlm-dummy-gender-desc" class="quarto-xref">Tabelle&nbsp;<span>19.2</span></a> sind die deskriptiven Statistiken der Körpergrößendaten abgebildet. Hier ist zu erkennen, dass die Standardabweichung in etwa die gleiche Größen haben, während die Mittelwerte mit <span class="math inline">\(\bar{y}_{f} = 169\)</span> bzw. <span class="math inline">\(\bar{y}_{m} = 180\)</span> entsprechend unterschiedlich sind.</p>
<div class="cell">
<div id="tbl-mlm-dummy-gender-desc" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-mlm-dummy-gender-desc-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabelle&nbsp;19.2: Deskriptive Statistiken der Körpergrößendaten.
</figcaption>
<div aria-describedby="tbl-mlm-dummy-gender-desc-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="do-not-create-environment cell caption-top table table-sm table-striped small">
<caption>Deskriptive Werte</caption>
<thead>
<tr class="header">
<th style="text-align: left;">Gender</th>
<th style="text-align: right;"><span class="math inline">\(\bar{x}\)</span></th>
<th style="text-align: right;">SD</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">f</td>
<td style="text-align: right;">168.8</td>
<td style="text-align: right;">8.4</td>
</tr>
<tr class="even">
<td style="text-align: left;">m</td>
<td style="text-align: right;">179.5</td>
<td style="text-align: right;">9.8</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<p>Um die Repräsentation von nominalen Variablen in einem lineare Modell zu verstehen ist allerdings zunächst noch eine kurze Detour notwendig um zu verstehen wie nominale Werte in <code>R</code> repräsewerden.</p>
</section>
<section id="nominale-variablen-in-r" class="level2" data-number="19.2">
<h2 data-number="19.2" class="anchored" data-anchor-id="nominale-variablen-in-r"><span class="header-section-number">19.2</span> Nominale Variablen in <code>R</code></h2>
<p>Nominale Variablen werden in <code>R</code> mittels eines eigenem Datentyps <code>factor</code> repräsentiert. Erstellt werden kann ein Faktor mittels der <code>factor()</code>-Funktion. Die Funktion hat drei wichtige Parameter. Der erste Parameter bezeichnet die Werte, der zweite die möglichen Faktorstufen (<code>levels</code>) und der dritte Parameter die dazugehörigen Bezeichnungen (<code>labels</code>). Ein einfaches Beispiel mit einer nominalen Variablen die die beiden Werte <code>m</code> und <code>f</code> annehmen kann, kann in <code>R</code> wie folgt umgesetzt werden.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>gender <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>),</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>                 <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>),</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>                 <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">'m'</span>,<span class="st">'f'</span>))</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>gender</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] m m f f
Levels: m f</code></pre>
</div>
</div>
<p>D.h. ein Faktor besteht aus einem Datenvektor mit den Elemente <span class="math inline">\((0,0,1,1)\)</span>. Auf diesem Datenvektor werden die Stufen <code>levels</code> mit <span class="math inline">\(0\)</span> und <span class="math inline">\(1\)</span> und definiert und die dazugehörigen <code>labels</code> mit <span class="math inline">\(m\)</span> und <span class="math inline">\(f\)</span> definiert. Wenn die neue Variable <code>gender</code> aufgerufen wird, gibt <code>R</code> einen Vektor mit den entsprechenden <code>labels</code> zurück. Zusätzlich gibt <code>R</code> die möglichen <code>labels</code> auch noch einmal explizit als <code>Levels</code> an.</p>
<p>Wenn der Parameter <code>levels</code> nicht angegeben wird, dann extrahiert <code>factor()</code> die eineindeutigen Werte selbst und führt die Abbildung auf die <code>labels</code> entsprechend den Sortierungsregeln von <code>R</code> aus.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>gender <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>),</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>                 <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">'m'</span>,<span class="st">'f'</span>))</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>gender</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] m m f f
Levels: m f</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(gender)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Factor w/ 2 levels "m","f": 1 1 2 2</code></pre>
</div>
</div>
<p>Dabei muss darauf geachtet werden, dass die Abbildung auch tatsächlich diejenige ist, die gewünscht ist.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>gender <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>),</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>                 <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">'f'</span>,<span class="st">'m'</span>))</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>gender</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] f f m m
Levels: f m</code></pre>
</div>
</div>
<p>Daher ist es fast immer sinnvoll <code>labels</code> und <code>levels</code> immer zusammen zu spezifizieren. Wenn die Parameter nicht angegeben werden, dann führt <code>factor</code> die Abbildung automatisch durch und für die <code>labels</code> werden die Datenwerte übernommen.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>gender <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>))</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>gender</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0 0 1 1
Levels: 0 1</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warnung
</div>
</div>
<div class="callout-body-container callout-body">
<p>Achtung, die Variable <code>gender</code> sieht zwar aus wie ein numerischer Vektor, sie ist es aber nicht.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.numeric</span>(gender)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>gender <span class="sc">+</span> <span class="dv">1</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA NA NA NA</code></pre>
</div>
</div>
<p>Intern wird eine Faktorvariable von <code>R</code> zwar als ein numerischer Vektor abgelegt. Aber die <em>sichtbaren</em> Werte sind nun die Zeichenketten der <code>labels</code> definiert, die daher auch angezeigt werden. Die interne numerische Repräsentation muss auch nicht mehr den ursprünglichen Datenwerten entsprechen.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.numeric</span>(gender)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 1 2 2</code></pre>
</div>
</div>
<p>Die Datenwerte waren ursprünglich <span class="math inline">\((0,1)\)</span> und sind jetzt auf <span class="math inline">\((1,2)\)</span> abgebildet worden. Dazu sei noch mal an die Eigenschaft von nominalen Variablen erinnert. Nominale Variablen sind voneinander unterscheidbare Werte die jedoch in <strong>keiner Reihenfolge zueinander</strong> stehen.</p>
</div>
</div>
<p>Die automatische Konvertierung von <code>factor()</code> funktioniert am intuitivsten mit Zeichenkettenvektoren.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>gender <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="fu">c</span>(<span class="st">'m'</span>,<span class="st">'f'</span>,<span class="st">'m'</span>,<span class="st">'f'</span>))</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>gender</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] m f m f
Levels: f m</code></pre>
</div>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(gender)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Factor w/ 2 levels "f","m": 2 1 2 1</code></pre>
</div>
</div>
<p><code>factor()</code> ermittelt zunächst die eineindeutigen Werte und sortiert diese dann entsprechend des Typen. In diesem Fall wird die Zeichenkette alphabetisch sortiert. Dann erfolgt die Abbildung der Werte auf die <code>labels</code>. Dies führt in diesem Fall dazu, dass die Werte <code>m</code> intern den Wert <span class="math inline">\(2\)</span> zugeordnet bekommen, obwohl der erste Wert in den Daten <code>m</code> ist. Diese Sortierung der Daten wird später noch einmal von Bedeutung werden.</p>
<p>Die Reihenfolge der Faktorstufen wird durch die Angabe des <code>levels</code> explizit bestimmt werden und ist daher auch noch mal ein Argument dafür das <code>levels</code>-Argument zu verwenden.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>gender <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="fu">c</span>(<span class="st">'m'</span>,<span class="st">'f'</span>,<span class="st">'m'</span>,<span class="st">'f'</span>),</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>                 <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">'m'</span>,<span class="st">'f'</span>))</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>gender</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] m f m f
Levels: m f</code></pre>
</div>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(gender)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Factor w/ 2 levels "m","f": 1 2 1 2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>gender <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="fu">c</span>(<span class="st">'m'</span>,<span class="st">'f'</span>,<span class="st">'m'</span>,<span class="st">'f'</span>),</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>                 <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">'f'</span>,<span class="st">'m'</span>))</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>gender</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] m f m f
Levels: f m</code></pre>
</div>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(gender)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Factor w/ 2 levels "f","m": 2 1 2 1</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tipp
</div>
</div>
<div class="callout-body-container callout-body">
<p>Im Package <code>forcats</code> sind eine Reihe von Funktionen hinterlegt, mit denen die Eigenschaften von <code>factor</code>-Variablen einfach manipuliert werden können. Zum Beispiel, wenn die Reihenfolge von Faktorstufen geändert werden soll kann die Funktion <code>fct_relevel()</code> verwendet.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] m f m f
Levels: f m</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] m f m f
Levels: m f</code></pre>
</div>
</div>
<p>Wie immer ist die ausführliche Dokumentation der Funktionen mit Beispiel die erste Addresse, wenn Probleme im Zusammenhang mit <code>factor</code>-Variablen auftauchen.</p>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tipp
</div>
</div>
<div class="callout-body-container callout-body">
<p>Viele Funktionen in <code>R</code>, wie z.B. <code>lm()</code>, transformieren Vektoren mit Zeichenketten automatisch in einen <code>factor()</code> um. Wird in <code>lm()</code> in der Formel beispielsweise <code>y ~ gender</code> benutzt und <code>gender</code> ist eine Datenspalte die aus den Zeichenketten <code>c('m','m','f','f')</code> besteht, dann ruft <code>lm()</code> intern die Funktion <code>factor()</code> für diese Daten auf und führt dann die Berechnung mit der resultierenden Faktorvariable durch.</p>
<p>Dies erleichtert natürlich oft den Umgang mit den Daten, hat aber den Nachteil das immer klar sein muss, dass die automatische Konvertierung auch tatsächlich diejenige ist, dich gewünscht ist.</p>
</div>
</div>
</section>
<section id="vergleich-von-zwei-gruppen-continued" class="level2" data-number="19.3">
<h2 data-number="19.3" class="anchored" data-anchor-id="vergleich-von-zwei-gruppen-continued"><span class="header-section-number">19.3</span> Vergleich von zwei Gruppen (continued)</h2>
<p>Zurück zum Körpergrößenvergleich. Normalerweise würden die Unterschiede zwischen den beiden Gruppen mit einem klassischen t-Test für unabhängige Stichproben unter der Annahme der Varianzgleichheit untersucht werden. In <code>R</code> kann dazu die <code>t.test()</code>-Funktion verwendet werden.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">t.test</span>(cm <span class="sc">~</span> gender, <span class="at">data=</span>height, <span class="at">var.equal=</span>T)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Two Sample t-test

data:  cm by gender
t = -4.5683, df = 58, p-value = 2.617e-05
alternative hypothesis: true difference in means between group f and group m is not equal to 0
95 percent confidence interval:
 -15.45403  -6.03713
sample estimates:
mean in group f mean in group m 
       168.7834        179.5290 </code></pre>
</div>
</div>
<p>Dem Output von <code>t.test()</code> zeigt an, dass der Unterschied zwischen den Gruppen statistisch Signifikant ist.</p>
<p>Der Anwendung des t-Tests unterliegt, wie bei allen statistischen Tests, ein Modell. Bei gleich großen Gruppen <span class="math inline">\((n_w = n_m)\)</span> folgt die übliche Formulierung.</p>
<p><span class="math display">\[\begin{equation}
\begin{aligned}
Y_{if} &amp;= \mu_{f} + \epsilon_{if}, \quad \epsilon_{if} \sim \mathcal{N}(0,\sigma^2) \\
Y_{im} &amp;= \mu_{m} + \epsilon_{im}, \quad \epsilon_{im} \sim \mathcal{N}(0,\sigma^2)
\end{aligned}
\label{eq-mlm-dummy-tTest-model}
\end{equation}\]</span></p>
<p>Dem Modell folgend, sollten beide Gruppen normalverteilt sein mit gleicher Varianz <span class="math inline">\(\sigma^2\)</span> und den Erwartungswerten <span class="math inline">\(\mu_f\)</span> für die weiblichen Teilnehmerinnen und <span class="math inline">\(\mu_m\)</span> für die männlichen Teilnehmer. Die Hypothesen beim t-Test sind unter der Nullhypothese die übliche Annahme der Gleichheit der Mittelwerte.</p>
<p><span class="math display">\[\begin{equation*}
H_0: \delta = 0
\end{equation*}\]</span></p>
<p>Daraus resultiert die folgende Teststatistik:</p>
<p><span class="math display">\[\begin{equation}
t = \frac{\bar{y}_m - \bar{y}_w}{\sqrt{\frac{s_m^2 + s_w^2}{2}}\sqrt{\frac{2}{n}}}
\label{eq-tTest}
\end{equation}\]</span></p>
<p>Unter der <span class="math inline">\(H_0\)</span> folgt die Referenz- bzw. Stichprobenverteilung einer t-Verteilung mit <span class="math inline">\(N - 2\)</span> Freiheitsgraden.</p>
<p><span class="math display">\[\begin{equation*}
t|H_0 \sim t_{df=2n-2}
\end{equation*}\]</span></p>
<p>Die entsprechende Dichtefunktion hat die folgende graphische Darstellung (siehe <a href="#fig-mlm-dummy-tDist" class="quarto-xref">Abbildung&nbsp;<span>19.2</span></a>).</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-mlm-dummy-tDist" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-mlm-dummy-tDist-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="mlm_dummy_coding_files/figure-html/fig-mlm-dummy-tDist-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-mlm-dummy-tDist-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;19.2: Dichtefunktion der t-Verteilung mit <span class="math inline">\(df=58\)</span> Freiheitsgraden.
</figcaption>
</figure>
</div>
</div>
</div>
<p>Soweit nicht Neues. Im Beispiel wurde ein <span class="math inline">\(t\)</span>-Wert von <span class="math inline">\(t = -4.6\)</span> beobachtet der derart extrem ist, dass er in <a href="#fig-mlm-dummy-tDist" class="quarto-xref">Abbildung&nbsp;<span>19.2</span></a> schon gar nicht mehr dargestellt wird. Im Folgenden soll nun gezeigt werden, das das gleiche Ergebnis mittels eines linearen Modellansatzes berechnet werden.</p>
<p>Das bekannte lineares Modell hat im einfachsten Fall die folgende Form für eine einfache Regression:</p>
<p><span class="math display">\[\begin{equation}
y_i = \beta_0 + \beta_1 \cdot x_i + \epsilon_i
\label{eq-mlm-dummy-lm}
\end{equation}\]</span></p>
<p>Die Frage ist nun, ob dieses Modell auf die Formeln <span class="math inline">\(\eqref{eq-mlm-dummy-tTest-model}\)</span> und <span class="math inline">\(\eqref{eq-tTest}\)</span> abgebildet werden kann?</p>
<p>Tatsächlich gibt es eine relativ einfache Möglichkeit mittels eines Ansatzes mit sogenannten <strong>Indikatorvariablen</strong> (oft auch als <strong>Dummyvariablen</strong> bezeichnet). Die <span class="math inline">\(Y\)</span>-Variable, die abhängige Variable ist die gleiche wie beim t-Test. Im Beispiel also die Körpergrößen. Daher bleibt für die <span class="math inline">\(X\)</span>-Variable nur noch die unabhängige Variable, in dem Beispiel entsprechend die <code>gender</code>-Variable. Jetzt entsteht allerdings das Problem, dass <span class="math inline">\(x_i\)</span> nur zwei verschiedene Werte annehmen kann. Diese sind im Beispiel entweder <code>m</code> oder <code>f</code> . Offensichtlich macht die folgende Formulierung wenig Sinn, da der Steigungskoeffizient <span class="math inline">\(\beta_1\)</span> nicht mit einem <em>Wert</em> <code>m</code> multipliziert werden kann.</p>
<p><span class="math display">\[\begin{equation*}
y_i = \beta_0 + \beta_1 \cdot m + \epsilon_i
\end{equation*}\]</span></p>
<p>Die Lösung besteht nun darin <span class="math inline">\(X_i\)</span>, also im Beispiel <code>m</code>, in eine Indikatorvariable umzuwandeln. Eine Indikatorvariable kann nur zwei verschiedene numerische Werte einnehmen. Entweder den Wert <span class="math inline">\(0\)</span> oder den Wert <span class="math inline">\(1\)</span> (es gibt auch noch andere Systeme, aber diese seien im Weiteren ignoriert). Dies führt zur folgenden Formel.</p>
<p><span class="math display">\[\begin{align*}
y_i &amp;= \beta_0 + \beta_1 \cdot 0 + \epsilon_i \quad \text{oder} \\
y_i &amp;= \beta_0 + \beta_1 \cdot 1 + \epsilon_i \quad
\end{align*}\]</span></p>
<p>Diese Formulierung ist nun wieder sinnvoll, da <span class="math inline">\(\beta_1\)</span> mit einem numerischen Wert multipliziert wird. Nun wird noch eine Abbildung von den Werten <code>m</code> und <code>f</code> auf die Werte <span class="math inline">\(0\)</span> und <span class="math inline">\(1\)</span> benötigt, um die Gruppenzugehörigkeit zu kodieren. Dazu wird eine sogenannte <strong>Referenzstufe</strong> festgelegt. Der Referenzstufe wird der Wert <span class="math inline">\(x_i = 0\)</span> zugewiesen. Im Beispiel sei die Referenzstufe die weibliche Gruppe. Dies führt zu der folgenden Vorschrift:</p>
<div class="line-block">Wenn der Wert <span class="math inline">\(y_i\)</span> aus der Gruppe weiblich (<code>f</code>) kommt, dann wird <span class="math inline">\(x_i = 0\)</span> gesetzt<br>
Wenn der Wert <span class="math inline">\(y_i\)</span> aus der Gruppe männlich (<code>m</code>) kommt, dann wird <span class="math inline">\(x_i = 1\)</span> gesetzt.</div>
<p>Formal:</p>
<p><span class="math display">\[\begin{equation*}
x_i = \begin{cases}
0\text{ wenn weiblich}\\
1\text{ wenn männlich}
\end{cases}
\end{equation*}\]</span></p>
<p>Was jetzt noch fehlt, ist eine sinnvolle Belegung des <span class="math inline">\(Y\)</span>-Achsenabschnittes <span class="math inline">\(\beta_0\)</span> und des <em>Steigungskoeffizienten</em> <span class="math inline">\(\beta_1\)</span> in Formel <span class="math inline">\(\eqref{eq-mlm-dummy-lm}\)</span> im Zusammenhang mit dem Indikatorvariablenansatz. In der weiblichen Gruppe mit <span class="math inline">\(x_i = 0\)</span> folgt für <span class="math inline">\(\eqref{eq-mlm-dummy-lm}\)</span>:</p>
<p><span class="math display">\[\begin{equation*}
y_i = \beta_0 + \beta_1 \cdot x_i + \epsilon_i = \beta_0 + \beta_1 \cdot 0 = \beta_0 + \epsilon
\end{equation*}\]</span></p>
<p>Daraus folgt, dass für alle <span class="math inline">\(Y\)</span>-Werte aus der Referenzgruppe, im Beispiel aus der Gruppe <code>f</code>, anhand des Modells der gleiche Wert <span class="math inline">\(\hat{y}_i\)</span> vorhergesagt wird. Formal:</p>
<p><span class="math display">\[\begin{equation*}
\hat{y}_{f} = \beta_0
\end{equation*}\]</span></p>
<p>Bezogen auf die übliche Interpretation von <span class="math inline">\(\beta_0\)</span> als der <span class="math inline">\(Y\)</span>-Achsenabschnitt beschreibt der <span class="math inline">\(Y\)</span>-Achsenabschnitt den Vorhersagewert <span class="math inline">\(\hat{y}_i\)</span> für all Werte aus der Referenzstufe. Die Frage ist nun welcher Wert <span class="math inline">\(\hat{y}_{f}\)</span> wird vorhergesagt? Es lässt sich zeigen (siehe unten), dass <span class="math inline">\(\beta_0\)</span> den Mittelwert der Referenzgruppe annimmt. Rein inituitiv macht das auch Sinn. Bei der linearen Regression werden die Modellkoeffizienten so gewählt, dass die Quadrate der Abweichungen, die Residuen, von der Geraden (Ebene) minimiert werden. In diesem Fall kommen alle Werte aus der Referenzgruppe, die durch die Wahl der Indikatorvariable (<span class="math inline">\(=0\)</span>) genau auf der <span class="math inline">\(Y\)</span>-Achse liegen. Derjenige Wert der die Abweichungen minimiert ist der Mittelwert <span class="math inline">\(\bar{y}_{f}\)</span> der Gruppe. Wenn nun noch die Annahmen der linearen Regression bezüglich der Residuen dazu genommen werden, folgt:</p>
<p><span class="math display">\[\begin{equation*}
\hat{y}_{f} = \beta_0 + \epsilon_i, \quad \epsilon \sim \mathcal{N}(0,\sigma)
\end{equation*}\]</span></p>
<p>Diese Formulierung ist genau gleich derjenigen die im t-Test-Ansatz verwendet wurde (siehe <span class="math inline">\(\eqref{eq-mlm-dummy-tTest-model}\)</span>). Formal wird also der Mittelwert <span class="math inline">\(\mu_f\)</span> mit dem <span class="math inline">\(Y\)</span>-Achsenabschnitt <span class="math inline">\(\beta_0\)</span> identifiziert:</p>
<p><span class="math display">\[\begin{equation*}
\beta_0 = \mu_f
\end{equation*}\]</span></p>
<p>Da die Indikatorvariable <span class="math inline">\(X_i\)</span> für Werte aus der Gruppe <code>f</code> den Wert <span class="math inline">\(0\)</span> zugewiesen bekommt, wird für <span class="math inline">\(Y\)</span>-Werte aus der Gruppe <code>m</code> entsprechend der Indikatorwert <span class="math inline">\(1\)</span> zugewiesen. Formal führt dies also zu:</p>
<p><span class="math display">\[\begin{equation*}
Y_i = \beta_0 + \beta_1 X_i = \beta_0 + \beta_1 \cdot 1 = \beta_0 + \beta_1
\end{equation*}\]</span></p>
<p>D.h. der vorhergesagte Wert <span class="math inline">\(\hat{y}_i\)</span> ist wieder nur eine Konstante für alle Werte von <span class="math inline">\(i\)</span>, die sich jetzt aber aus beiden Modellparametern <span class="math inline">\(\beta_0\)</span> und <span class="math inline">\(\beta_1\)</span> zusammensetzt. Mit der gleichen Argumentation wie oben, ist der Wert der unter der Randbedingung des Minimums der mittleren, quadrierten Abweichungen der Mittelwert der Werte aus der Gruppe <code>m</code>. Daraus folgt, zusammen mit der Festsetzung von eben <span class="math inline">\(\beta_0 = \bar{y}_{f}\)</span>:</p>
<p><span class="math display">\[\begin{align*}
\bar{y}_{m} &amp;= \beta_0 + \beta_1 = \bar{y}_{f} + \beta_1 \\
\Leftrightarrow \beta_1 &amp;= \bar{y}_{m} - \bar{y}_{f}
\end{align*}\]</span></p>
<p>Daraus folgt, dass der Modellparameter <span class="math inline">\(\beta_1\)</span>, der <em>Steigungskoeffizient</em>, den Unterschied der Mittelwerten <span class="math inline">\(\Delta = \bar{y}_{m} - \bar{y}_{f}\)</span> zwischen den beiden Gruppen modelliert.</p>
<p>Insgesamt resultieren daraus die folgenden Zusammenhänge wenn noch die Annnahme der normalverteilten Residuen <span class="math inline">\(\epsilon_i \sim \mathcal{N}(0,\sigma)\)</span> dazugenommen werden.</p>
<p><span class="math display">\[\begin{align*}
y_i &amp;= \beta_0 + \beta_1 \cdot 0 + \epsilon_i = \mu_f + \Delta \cdot 0 + \epsilon_i = \mu_f + \epsilon_i \\
y_i &amp;= \beta_0 + \beta_1 \cdot 1 + \epsilon_i = \mu_f + \Delta \cdot 1 + \epsilon_i = \mu_f + (\mu_m - \mu_f) + \epsilon_i = \mu_m + \epsilon_i
\end{align*}\]</span></p>
<p>Insgesamt zeigt dies, dass mittels der Indikatorvariablen eine Abbildung des einfachen linearen Regressionsmodells auf den t-Test (Formel <span class="math inline">\(\eqref{eq-mlm-dummy-tTest-model}\)</span>) möglich ist. Der t-Test ist kann daher als <em>Spezialfall</em> der einfachen Regression bzw. des einfachen linearen Modells betrachtet werden.</p>
<p>Die Voraussetzungen im t-Test der Normalverteilung der Werte, bedeutet hierbei letztendlich nichts anderes, als die Normalverteilung der Residuen im Regressionsmodell. Die Voraussetzung der Varianzgleichheit ist dabei nichts anderes als die Homoskedastizität im linearen Modell.</p>
<p>Um den Ansatz einmal konkret zu machen, sei zum Beispiel den ersten Wert aus <a href="#tbl-mlm-dummy-gender" class="quarto-xref">Tabelle&nbsp;<span>19.1</span></a> <span class="math inline">\(y_{1m} = 174.4\)</span> in seine Komponenten aufgeteilt. Es folgt <span class="math inline">\(\Delta = 179.53 - 168.78 = 10.75, e_{1m} = 174.4 - 179.53= -5.13\)</span> und <span class="math inline">\(x_{1m} = 1\)</span>.</p>
<p><span class="math display">\[\begin{align*}
y_{1m} = 174.4 &amp;= \mu_f + \Delta \cdot x_{1m} + e_{1m} \\
&amp;= 168.78 + 10.74 \cdot 1 - 5.13
\end{align*}\]</span></p>
<p>Das Gleiche für den ersten weiblichen Wert in <a href="#tbl-mlm-dummy-gender" class="quarto-xref">Tabelle&nbsp;<span>19.1</span></a> <span class="math inline">\(y_{1f} = 171.3, \Delta = 10.75, e_{1f} = 171.3 - 168.78 = 2.52\)</span> und <span class="math inline">\(x_{1f} = 0\)</span>.</p>
<p><span class="math display">\[\begin{align*}
y_{1f} = 171.3 &amp;= \mu_f + \Delta \cdot x_{1f} + e_{1f} \\
&amp;= 168.78 + 10.74 \cdot 0 + 2.52
\end{align*}\]</span></p>
<p>Zusammenfassend, mit Hilfe von Indikatorvariable ist eine Möglichkeit gefunden worden, mit der das t-Test Modell auf das lineare Modell abgebildet werden kann.</p>
<p>In <a href="#fig-mlm-dummy-dummymodel" class="quarto-xref">Abbildung&nbsp;<span>19.3</span></a> ist die <em>Regressionsgerade</em> für das Modell zusammen mit den Rohdaten mittels der Indikatorvariablen abgetragen.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-mlm-dummy-dummymodel" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-mlm-dummy-dummymodel-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="mlm_dummy_coding_files/figure-html/fig-mlm-dummy-dummymodel-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-mlm-dummy-dummymodel-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;19.3: Regressionsgerade des einfachen linearen Modell mit Indikatorvariablen.
</figcaption>
</figure>
</div>
</div>
</div>
<p>In <a href="#fig-mlm-dummy-dummymodel" class="quarto-xref">Abbildung&nbsp;<span>19.3</span></a> ist zu erkennen, wie der Steigungskoeffizient <span class="math inline">\(\beta_0\)</span> tatsächlich als eine Steigung zu interpretieren ist. Da die beiden Gruppen um eine <span class="math inline">\(X\)</span>-Einheit von <span class="math inline">\(1\)</span> voneinander entfernt liegen, ist der Unterschied zwischen den beiden Gruppenmittelwerten genau die <em>Steigung</em> der Gerade.</p>
<section id="verwendung-von-indikatorvariablen-in-lm" class="level3" data-number="19.3.1">
<h3 data-number="19.3.1" class="anchored" data-anchor-id="verwendung-von-indikatorvariablen-in-lm"><span class="header-section-number">19.3.1</span> Verwendung von Indikatorvariablen in <code>lm()</code></h3>
<p>In <code>lm()</code> kann eine nominale Variable genauso wie die bisherigen kontinuierlichen Variablen verwendet werden.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>mod <span class="ot">&lt;-</span> <span class="fu">lm</span>(cm <span class="sc">~</span> gender, height)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Modellfit</caption>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;"><span class="math inline">\(\hat{\beta}\)</span></th>
<th style="text-align: right;"><span class="math inline">\(s_e\)</span></th>
<th style="text-align: right;">t</th>
<th style="text-align: left;">p</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">(Intercept)</td>
<td style="text-align: right;">168.783</td>
<td style="text-align: right;">1.663</td>
<td style="text-align: right;">101.477</td>
<td style="text-align: left;">&lt;0.001</td>
</tr>
<tr class="even">
<td style="text-align: left;">genderm</td>
<td style="text-align: right;">10.746</td>
<td style="text-align: right;">2.352</td>
<td style="text-align: right;">4.568</td>
<td style="text-align: left;">&lt;0.001</td>
</tr>
</tbody>
</table>
</div>
</div>
<p><code>lm()</code> gibt die Faktorstufe nach dem Namen der Faktorvariable an. Im Beispiel steht <code>genderm</code> für Stufe <code>m</code> aus dem Faktor <code>gender</code>. Der Wert für <span class="math inline">\(\hat{\beta}_0\)</span> entspricht genau demjenigen in <a href="#tbl-mlm-dummy-gender-desc" class="quarto-xref">Tabelle&nbsp;<span>19.2</span></a>. Weiterhin, der Wert für den t-Wert für <span class="math inline">\(\beta_1 = \Delta\)</span>, ist zu beobachten, dass der Wert exakt mit t-Wert übereinstimmt, der mittels des t-Test berechnet wurde . Lediglich das Vorzeichen ist in der anderen Richtung was aber nur damit zusammenhängt welcher Gruppenmittelwert von dem anderen Gruppenmittelwert subtrahiert wird.</p>
<p>Sei nun noch das Konfidenzintervall für den <em>Steigungskoeffizienten</em> <span class="math inline">\(\beta_1\)</span> betrachtet:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">confint</span>(mod)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                2.5 %    97.5 %
(Intercept) 165.45401 172.11276
genderm       6.03713  15.45403</code></pre>
</div>
</div>
<p>Wieder stimmt, bis auf das Vorzeichen, das Konfidenzintervall exakt mit demjenigen des t-Test überein.</p>
<p>Damit lässt sich auf Basis der vorhergehenden Ausführung auch direkt nachvollziehen wie <code>lm()</code> intern mit nominalen Variablen umgeht. Bei der Modellevaluierung erkennt <code>lm()</code> <code>gender</code> als nominale Variable und ersetzt es durch eine Indiktaorvariable (siehe <a href="#tbl-mlm-dummy-dummy-lm" class="quarto-xref">Tabelle&nbsp;<span>19.3</span></a>).</p>
<div class="cell">
<div id="tbl-mlm-dummy-dummy-lm" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-mlm-dummy-dummy-lm-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabelle&nbsp;19.3: Repräsentation der Faktorvariablen
</figcaption>
<div aria-describedby="tbl-mlm-dummy-dummy-lm-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="do-not-create-environment cell caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: right;">cm</th>
<th style="text-align: left;">gender</th>
<th style="text-align: right;"><span class="math inline">\(x_1\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">174.40</td>
<td style="text-align: left;">m</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: right;">177.70</td>
<td style="text-align: left;">m</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: right;">195.59</td>
<td style="text-align: left;">m</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: right;">160.05</td>
<td style="text-align: left;">f</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">164.92</td>
<td style="text-align: left;">f</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: right;">154.35</td>
<td style="text-align: left;">f</td>
<td style="text-align: right;">0</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<p><code>lm()</code> ersetzt <code>gender</code> durch die Indikatorvariable, also durch Zahlenwerte, und dann kann einfach wieder die bekannte Maschinerie des linearen Modell angeworfen werden. Als letzten Schritt nun noch eine Betrachtung des resultierenden Residuenplots (siehe <a href="#fig-mlm-dummy-resid-plot" class="quarto-xref">Abbildung&nbsp;<span>19.4</span></a>).</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-mlm-dummy-resid-plot" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-mlm-dummy-resid-plot-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="mlm_dummy_coding_files/figure-html/fig-mlm-dummy-resid-plot-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-mlm-dummy-resid-plot-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;19.4: Residuenplot des Körpergrößenmodells
</figcaption>
</figure>
</div>
</div>
</div>
<p>Der Plot sieht etwas speziell aus, da die Residuen nur für zwei vorhergesagte Werte <span class="math inline">\(\hat{y}_i\)</span> angezeigt werden. Diese spezielle Form, ist letztendlich ein Ergebnis dessen, dass nur zwei verschiedene <span class="math inline">\(\hat{y}\)</span>-Werte vorhergesagt werden.</p>
</section>
</section>
<section id="dummyvariablen-bei-mehr-als-zwei-faktorstufen" class="level2" data-number="19.4">
<h2 data-number="19.4" class="anchored" data-anchor-id="dummyvariablen-bei-mehr-als-zwei-faktorstufen"><span class="header-section-number">19.4</span> Dummyvariablen bei mehr als zwei Faktorstufen</h2>
<p>Nachdem ein Beispiel mit zwei Faktorstufen durchgegangen, stellt sich die Frage ob dieser Ansatz auch für mehr als zwei Faktorstufen einer nominalen Variablen möglich ist? Sei dazu, zunächst ein einfaches synthetisches Beispiel betrachtet (siehe <a href="#fig-mlm-dummy-reaction-01" class="quarto-xref">Abbildung&nbsp;<span>19.5</span></a>)</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-mlm-dummy-reaction-01" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-mlm-dummy-reaction-01-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="mlm_dummy_coding_files/figure-html/fig-mlm-dummy-reaction-01-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-mlm-dummy-reaction-01-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;19.5: Ein Reaktionszeitexperiment mit vier Stufen A, B, C und D
</figcaption>
</figure>
</div>
</div>
</div>
<p>Es wurde ein Datensatz ähnlich einem Reaktionszeitexperiment erstellt, bei dem Probanden unter vier verschiedenen Konditionen <span class="math inline">\(A,B,C\)</span> und <span class="math inline">\(D\)</span> beobachtet wurden. Die deskriptive Daten sind <a href="#tbl-mlm-dummy-reaction-01" class="quarto-xref">Tabelle&nbsp;<span>19.4</span></a> einsehbar. Der Einfachheit halber sind die Daten so generiert, dass die Gruppenmittelwert von <span class="math inline">\(A\)</span> nach <span class="math inline">\(D\)</span> immer größer werden.</p>
<div class="cell">
<div id="tbl-mlm-dummy-reaction-01" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-mlm-dummy-reaction-01-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabelle&nbsp;19.4: Gruppenmittelwerte, Standardabweichung und Unterschiede zu Stufe A
</figcaption>
<div aria-describedby="tbl-mlm-dummy-reaction-01-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="do-not-create-environment cell caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">Gruppe</th>
<th style="text-align: right;"><span class="math inline">\(\bar{y}_j\)</span></th>
<th style="text-align: right;"><span class="math inline">\(s_j\)</span></th>
<th style="text-align: right;"><span class="math inline">\(\Delta_{j-A}\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">A</td>
<td style="text-align: right;">509.53</td>
<td style="text-align: right;">45.66</td>
<td style="text-align: right;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">B</td>
<td style="text-align: right;">599.68</td>
<td style="text-align: right;">43.57</td>
<td style="text-align: right;">90.15</td>
</tr>
<tr class="odd">
<td style="text-align: left;">C</td>
<td style="text-align: right;">706.94</td>
<td style="text-align: right;">40.49</td>
<td style="text-align: right;">197.41</td>
</tr>
<tr class="even">
<td style="text-align: left;">D</td>
<td style="text-align: right;">805.09</td>
<td style="text-align: right;">52.51</td>
<td style="text-align: right;">295.56</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<p>Die letzten Spalte zeigt die Abweichungen der Gruppenmittelwerte der Gruppen <span class="math inline">\(B,C,D\)</span> von der Gruppe <span class="math inline">\(A\)</span> an. Das sollte jetzt auch schon direkt eine Möglichkeit aufzeigen, wie diese Daten in ein lineares Modell überführt werden können. Dazu wird wiederum eine Referenzgruppe festgelegt, z.B. Gruppe <span class="math inline">\(A\)</span>. Anstatt nun nur ein einzelnes <span class="math inline">\(Delta\)</span> zu berechnen, werden drei <span class="math inline">\(\Delta\)</span>s eingeführt. Die <span class="math inline">\(\Delta\)</span>s repräsentieren dabei jeweils die Abweichungen der spezifischen Faktorstufen von der Referenzstufe. Für jedes dieser <span class="math inline">\(\Delta_i\)</span>s wird nun eine Indikatorvariable <span class="math inline">\(x_{ij}\)</span> eingeführt. Die Indikatorvariable indiziert jeweils über die <span class="math inline">\(0\)</span> und <span class="math inline">\(1\)</span> die Zugehörig des <span class="math inline">\(Y_i\)</span> Wertes zu der Gruppe. Ein lineares Modell lässt nun wie folgt formulieren:</p>
<p><span class="math display">\[\begin{equation*}
y_i = \mu_A + \Delta_{B-A} x_{1i} + \Delta_{C-A} x_{2i} + \Delta_{D-A} x_{3i} + \epsilon_i
\end{equation*}\]</span></p>
<p>Für die Abweichungen von der Referenzgruppe sind drei Indikatorvarialben <span class="math inline">\(x_{1i}, x_{2i}\)</span> und <span class="math inline">\(x_{3i}\)</span> eingeführt worden. Die Modellkoeffizienten bilden somit jeweils die Abweichungen der Mittelwerte von Gruppe <span class="math inline">\(A\)</span> ab. Dies führt dann zu der folgenden Kodierung der Daten (siehe <a href="#tbl-mlm-dummy-reaction-02" class="quarto-xref">Tabelle&nbsp;<span>19.5</span></a>).</p>
<div class="cell">
<div id="tbl-mlm-dummy-reaction-02" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-mlm-dummy-reaction-02-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabelle&nbsp;19.5: Kodierung der Dummyvariablen für das Reaktionszeitexperiment.
</figcaption>
<div aria-describedby="tbl-mlm-dummy-reaction-02-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="table do-not-create-environment cell caption-top table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th style="text-align: right;" data-quarto-table-cell-role="th">x1</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">x2</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">x3</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">A</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">B</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">C</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">D</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
</tr>
</tbody>
</table>


</div>
</div>
</figure>
</div>
</div>
<p>Wenn ein Wert <span class="math inline">\(Y_i\)</span> aus Gruppe <span class="math inline">\(A\)</span>, der Referenzgruppe, kommt, dann werden die dire Indikatorvariablen <span class="math inline">\(X_{1i}, X_{2i}, X_{3i}\)</span> mit den Werten <span class="math inline">\((0,0,0)\)</span> belegt. Wenn ein Wert <span class="math inline">\(Y_i\)</span> aus Gruppe <span class="math inline">\(B\)</span> kommt, dann mit <span class="math inline">\((1,0,0)\)</span> belegt usw..</p>
<p>Dieser Ansatz lässt sich wie folgt Verallgemeinern (siehe <a href="#tbl-mlm-dummy-coding" class="quarto-xref">Tabelle&nbsp;<span>19.6</span></a>).</p>
<div id="tbl-mlm-dummy-coding" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-mlm-dummy-coding-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabelle&nbsp;19.6: Indikatorkodierung bei <span class="math inline">\(k\)</span>-Faktorstufen.
</figcaption>
<div aria-describedby="tbl-mlm-dummy-coding-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<table class="caption-top table">
<thead>
<tr class="header">
<th></th>
<th><span class="math inline">\(x_1\)</span></th>
<th><span class="math inline">\(x_2\)</span></th>
<th><span class="math inline">\(\ldots\)</span></th>
<th><span class="math inline">\(x_{K-1}\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Referenz (<span class="math inline">\(j=1\)</span>)</td>
<td>0</td>
<td>0</td>
<td></td>
<td>0</td>
</tr>
<tr class="even">
<td><span class="math inline">\(j=2\)</span></td>
<td>1</td>
<td>0</td>
<td><span class="math inline">\(\ldots\)</span></td>
<td>0</td>
</tr>
<tr class="odd">
<td><span class="math inline">\(j=3\)</span></td>
<td>0</td>
<td>1</td>
<td><span class="math inline">\(\ldots\)</span></td>
<td>0</td>
</tr>
<tr class="even">
<td><span class="math inline">\(j=K\)</span></td>
<td>0</td>
<td>0</td>
<td><span class="math inline">\(\ldots\)</span></td>
<td>1</td>
</tr>
</tbody>
</table>
</div>
</figure>
</div>
<p>Bei Integration einer nominalen Variable mit <span class="math inline">\(K\)</span> Faktorstufen werden <span class="math inline">\(K-1\)</span> Indikatorvariablen <span class="math inline">\(X_1, X_2, \ldots, X_{K-1}\)</span> benötigt. Eine der Faktorstufen wird als Referenzstufe definiert. Die Indikatorvariablen <span class="math inline">\(X_1\)</span> bis <span class="math inline">\(X_{K-1}\)</span> kodieren dann die Abweichungen der anderen Stufen von der Referenzstufe. Diese Art der Kodierung wird in der Literatur auch als <em>treatment</em> Kodierung bezeichnet. Die Indikatorvariablen werden oft auch als Dummyvariablen bezeichnet</p>
<div id="def-dummy" class="theorem definition">
<p><span class="theorem-title"><strong>Definition 19.1 (Indikator-/Dummyvariablen )</strong></span> Eine Dummyvariable, auch Indikatorvariable genannt, ist eine binäre Prädiktorvariable die nur die Werte <span class="math inline">\(0\)</span> oder <span class="math inline">\(1\)</span> annimmt. Mit einer Dummyvariable kann die An- bzw. Abwesenheit eines kategorialen Effekts modelliert werden.</p>
</div>
<p>Das lineare Modell in unserem Reaktionszeitexperiment ergibt den folgenden Modellfit (siehe <a href="#tbl-mlm-dummy-reaction-03" class="quarto-xref">Tabelle&nbsp;<span>19.7</span></a>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>mod <span class="ot">&lt;-</span> <span class="fu">lm</span>(rt <span class="sc">~</span> group, data)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div id="tbl-mlm-dummy-reaction-03" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-mlm-dummy-reaction-03-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabelle&nbsp;19.7: Koeffizientenmatrix für die Dummykodierung des Reaktionszeitexperiments.
</figcaption>
<div aria-describedby="tbl-mlm-dummy-reaction-03-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="do-not-create-environment cell caption-top table table-sm table-striped small">
<caption>Modellfit</caption>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;"><span class="math inline">\(\hat{\beta}\)</span></th>
<th style="text-align: right;"><span class="math inline">\(s_e\)</span></th>
<th style="text-align: right;">t</th>
<th style="text-align: left;">p</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">(Intercept)</td>
<td style="text-align: right;">509.526</td>
<td style="text-align: right;">10.235</td>
<td style="text-align: right;">49.784</td>
<td style="text-align: left;">&lt;0.001</td>
</tr>
<tr class="even">
<td style="text-align: left;">groupB</td>
<td style="text-align: right;">90.150</td>
<td style="text-align: right;">14.474</td>
<td style="text-align: right;">6.228</td>
<td style="text-align: left;">&lt;0.001</td>
</tr>
<tr class="odd">
<td style="text-align: left;">groupC</td>
<td style="text-align: right;">197.414</td>
<td style="text-align: right;">14.474</td>
<td style="text-align: right;">13.639</td>
<td style="text-align: left;">&lt;0.001</td>
</tr>
<tr class="even">
<td style="text-align: left;">groupD</td>
<td style="text-align: right;">295.561</td>
<td style="text-align: right;">14.474</td>
<td style="text-align: right;">20.420</td>
<td style="text-align: left;">&lt;0.001</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<p>Als Steigungskoeffizienten werden genau die Abweichungen der Mittelwerte der jeweiligen Faktorstufen von der Referenzstufe erhalten (siehe <a href="#tbl-mlm-dummy-reaction-02" class="quarto-xref">Tabelle&nbsp;<span>19.5</span></a>). Zusammenfassend ermöglicht somit die Verwendung der Indikatorvarialben die Möglichkeit eine nominale Variable mit beliebig vielen Faktorstufen in einem linearen Modell abzubilden. Damit ist dann auch die Unterscheidung in ANOVA und linear Regression als überfällig anzusehen, da beide letztendlich auf dem gleichem Modell, nämlich dem linearen Modell, beruhen.</p>
<p>Es folgt wieder eine kurze Betrachtung des Residuenplots (siehe <a href="#fig-mlm-dummy-reaction-02" class="quarto-xref">Abbildung&nbsp;<span>19.6</span></a>).</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-mlm-dummy-reaction-02" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-mlm-dummy-reaction-02-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="mlm_dummy_coding_files/figure-html/fig-mlm-dummy-reaction-02-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-mlm-dummy-reaction-02-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;19.6: Residuenplot für das Modell der Reaktionszeitdaten.
</figcaption>
</figure>
</div>
</div>
</div>
<p>Es ist wieder zu sehen, dass nur vier verschiedene <span class="math inline">\(\hat{y}_i\)</span> Werte vorhergesagt werden, nämlich die Mittelwerte <span class="math inline">\(\bar{y}_k\)</span> in den jeweiligen <span class="math inline">\(K\)</span> Gruppen. Die Residuen <span class="math inline">\(e_i\)</span> streuen daher nur um diese vorhergesagten Werte.</p>
<p>In <code>R</code> kann die Dummy-Kodierung explizit mittels der <code>dummy.coef()</code>-Funktion erhalten werden.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dummy.coef</span>(mod)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Full coefficients are 
                                                       
(Intercept):     509.5262                              
group:                  A         B         C         D
                  0.00000  90.15023 197.41364 295.56065</code></pre>
</div>
</div>
</section>
<section id="kombination-von-kontinuierlichen-und-nominalen-prädiktorvariablen" class="level2" data-number="19.5">
<h2 data-number="19.5" class="anchored" data-anchor-id="kombination-von-kontinuierlichen-und-nominalen-prädiktorvariablen"><span class="header-section-number">19.5</span> Kombination von kontinuierlichen und nominalen Prädiktorvariablen</h2>
<p>Da durch die Verwendung von Indikatorvariablen die Unterscheidung zwischen nominalen und kontinuierlichen Variablen in der Modellierung aufgehoben wird, können beide Typen von Variablen in einem Modell integriert werden. In <a href="#fig-mlm-dummy-combi-01" class="quarto-xref">Abbildung&nbsp;<span>19.7</span></a> ist ein hypothetischen Zusammenhang zwischen der körperlichen Leistung dem Trainingsalter und dem Gender abgetragen.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-mlm-dummy-combi-01" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-mlm-dummy-combi-01-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="mlm_dummy_coding_files/figure-html/fig-mlm-dummy-combi-01-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-mlm-dummy-combi-01-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;19.7: Hypothetische Leistungsentwicklung in Abhängigkeit vom Alter und Gender
</figcaption>
</figure>
</div>
</div>
</div>
<p>Das Trainingsalter (<code>ta</code>) geht wie bisher als kontinuierliche Variable in das Modell ein, während <code>gender</code> als nominale Variable über eine Dummyvariable modelliert wird. Weibliche Teilnehmerinnen der Studie werden als Referenzstufe festgelegt. Das resultiert dann in dem folgenden linearen Modell:</p>
<p><span class="math display">\[\begin{align*}
Y_i &amp;= \beta_{ta = 0,x_{1i}=0} + \Delta_m \times x_{1i} + \beta_{ta} \times ta + \epsilon_i \\
x_1 &amp;=
\begin{cases}
0\text{ wenn weiblich}\\
1\text{ wenn männlich}
\end{cases} \\
\end{align*}\]</span></p>
<p>Modellieren mit <code>lm()</code> führt dann zu:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>mod <span class="ot">&lt;-</span> <span class="fu">lm</span>(perf <span class="sc">~</span> gender_f <span class="sc">+</span> ta, lew)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div id="tbl-mlm-dummy-combi-01" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-mlm-dummy-combi-01-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabelle&nbsp;19.8: Modellfit für das Modell mit Trainingsalter und Gender.
</figcaption>
<div aria-describedby="tbl-mlm-dummy-combi-01-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="do-not-create-environment cell caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">term</th>
<th style="text-align: right;">estimate</th>
<th style="text-align: right;">std.error</th>
<th style="text-align: right;">statistic</th>
<th style="text-align: right;">p.value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">(Intercept)</td>
<td style="text-align: right;">41.181</td>
<td style="text-align: right;">1.083</td>
<td style="text-align: right;">38.024</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">gender_fm</td>
<td style="text-align: right;">-10.877</td>
<td style="text-align: right;">0.805</td>
<td style="text-align: right;">-13.503</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ta</td>
<td style="text-align: right;">1.927</td>
<td style="text-align: right;">0.145</td>
<td style="text-align: right;">13.261</td>
<td style="text-align: right;">0</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<p>Die Variable <code>gender</code> ist durch <code>lm()</code> als Dummyvariable definiert worden und der Steigungskoeffizient <span class="math inline">\(\beta_1=\)</span> <code>gender_fm</code> kodiert den mittleren Unterschied zwischen männlichen und weiblichen Studienteilnehmerinnen. Der <span class="math inline">\(Y\)</span>-Achsenabschnitt kodiert daher die Leistung von weiblichen Teilnehmerinnen mit einem Trainingsalter von <code>ta</code><span class="math inline">\(= 0\)</span>. (Warum?). Der Graph der Datenpunkte zusammen mit den resultierenden Modellgraphen der vorhergesagten <span class="math inline">\(\hat{y}_i\)</span> zeigt an wie das Modell die Daten modelliert (siehe <a href="#fig-mlm-dummy-combi-02" class="quarto-xref">Abbildung&nbsp;<span>19.8</span></a>).</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-mlm-dummy-combi-02" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-mlm-dummy-combi-02-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="mlm_dummy_coding_files/figure-html/fig-mlm-dummy-combi-02-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-mlm-dummy-combi-02-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;19.8: Leistungsentwicklung in Abhängigkeit vom Alter und Gender
</figcaption>
</figure>
</div>
</div>
</div>
<p>Es wurden zwei Geraden modelliert. Eine Gerade für die weiblichen und eine für die männlichen Teilnehmer. Die Geraden sind parallel zueinander und um den Wert von <span class="math inline">\(\beta_1\)</span> gegeneinander verschoben.</p>
<p>Natürlich ist es auch nun möglich mit dem Indikatorvariablenansatz auch eine Interaktion zwischen kontinuierlichen und nominalen Variablen zu modellieren. Wenn die Daten zum Beispiel dem Trend in <a href="#fig-mlm-dummy-combi-03" class="quarto-xref">Abbildung&nbsp;<span>19.9</span></a> folgen würden.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-mlm-dummy-combi-03" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-mlm-dummy-combi-03-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="mlm_dummy_coding_files/figure-html/fig-mlm-dummy-combi-03-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-mlm-dummy-combi-03-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;19.9: Leistungsentwicklung in Abhängigkeit vom Alter und Gender
</figcaption>
</figure>
</div>
</div>
</div>
<p>Hier ist zu sehen, dass die Zunahme der Leistung mit dem Trainingsalter nicht gleich ist in beiden <code>gender</code> Gruppen. Bei den männlichen Teilnehmern ist der Zuwachs mit dem Trainingsalter größer. D.h der Einfluss der Prädiktorvariable Trainingsalter hängt mit der Ausprägung der Prädiktorvariablen <code>gender</code> zusammen. Es liegt ein Interaktionseffekt vor. Übertragen auf ein lineares Modell könnte der Modellansatz wie folgt aussehen:</p>
<p><span class="math display">\[\begin{equation*}
y_i = \beta_{ta=0,x_{1i}=0} + \Delta_m \times x_{1i} + \beta_{ta} \times ta + \beta_{ta \times gender} \times x_{1i} \times ta + \epsilon_i
\end{equation*}\]</span></p>
<p>In <code>lm()</code> ausgedrückt:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>mod <span class="ot">&lt;-</span> <span class="fu">lm</span>(perf <span class="sc">~</span> gender_f <span class="sc">*</span> ta, lew)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div id="tbl-mlm-dummy-combi-02" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-mlm-dummy-combi-02-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabelle&nbsp;19.9: Modellfit für das Interaktionsmodell mit Trainingsalter und Gender.
</figcaption>
<div aria-describedby="tbl-mlm-dummy-combi-02-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="do-not-create-environment cell caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">term</th>
<th style="text-align: right;">estimate</th>
<th style="text-align: right;">std.error</th>
<th style="text-align: right;">statistic</th>
<th style="text-align: right;">p.value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">(Intercept)</td>
<td style="text-align: right;">31.354</td>
<td style="text-align: right;">1.370</td>
<td style="text-align: right;">22.891</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">gender_ff</td>
<td style="text-align: right;">8.575</td>
<td style="text-align: right;">2.010</td>
<td style="text-align: right;">4.266</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ta</td>
<td style="text-align: right;">1.763</td>
<td style="text-align: right;">0.195</td>
<td style="text-align: right;">9.043</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">gender_ff:ta</td>
<td style="text-align: right;">2.362</td>
<td style="text-align: right;">0.290</td>
<td style="text-align: right;">8.139</td>
<td style="text-align: right;">0</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<p>Die gefitteten Regressionsgeraden nehmen dann die folgende Form an (siehe <a href="#fig-mlm-dummy-combi-04" class="quarto-xref">Abbildung&nbsp;<span>19.10</span></a>).</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-mlm-dummy-combi-04" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-mlm-dummy-combi-04-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="mlm_dummy_coding_files/figure-html/fig-mlm-dummy-combi-04-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-mlm-dummy-combi-04-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;19.10: Leistungsentwicklung in Abhängigkeit vom Alter und Gender
</figcaption>
</figure>
</div>
</div>
</div>
<p>Zunächst sollen Modellkoeffizienten mit Hilfe des Graphen interpretiert werden. Dazu wird die Prädiktorvariable für das Alters <code>ta</code> um den Wert <span class="math inline">\(\bar{ta} = 6\)</span> zentriert und die Modellanpassung erfolgt mittels der zentrierten Variable.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>lew <span class="ot">&lt;-</span> lew <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">ta_c =</span> ta <span class="sc">-</span> ta_cen)</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>mod_c <span class="ot">&lt;-</span> <span class="fu">lm</span>(perf <span class="sc">~</span> gender_f <span class="sc">*</span> ta_c, lew)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In <a href="#tbl-mlm-dummy-combi-03" class="quarto-xref">Tabelle&nbsp;<span>19.10</span></a> sind die neuen Koeffizienten zu sehen. Sie unterscheiden sich nur für <span class="math inline">\(\beta_0\)</span> und <span class="math inline">\(\beta_1\)</span> zu den Koeffizienten von <a href="#tbl-mlm-dummy-combi-02" class="quarto-xref">Tabelle&nbsp;<span>19.9</span></a> (Warum?).</p>
<div class="cell">
<div id="tbl-mlm-dummy-combi-03" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-mlm-dummy-combi-03-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabelle&nbsp;19.10: Modellfit für das Interaktionsmodell mit dem zentrierten Trainingsalter (<code>ta_c</code>) und Gender.
</figcaption>
<div aria-describedby="tbl-mlm-dummy-combi-03-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="do-not-create-environment cell caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">coef</th>
<th style="text-align: left;">term</th>
<th style="text-align: right;">estimate</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><span class="math inline">\(\beta_0\)</span></td>
<td style="text-align: left;">(Intercept)</td>
<td style="text-align: right;">41.934</td>
</tr>
<tr class="even">
<td style="text-align: left;"><span class="math inline">\(\beta_1\)</span></td>
<td style="text-align: left;">gender_ff</td>
<td style="text-align: right;">22.750</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span class="math inline">\(\beta_2\)</span></td>
<td style="text-align: left;">ta_c</td>
<td style="text-align: right;">1.763</td>
</tr>
<tr class="even">
<td style="text-align: left;"><span class="math inline">\(\beta_3\)</span></td>
<td style="text-align: left;">gender_ff:ta_c</td>
<td style="text-align: right;">2.362</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<p>Wie sind die Modellkoeffizienten zu interpretieren? Die Referenzgruppe sind die Datenpunkte der männlichen Gruppe. Daher ist der <span class="math inline">\(Y\)</span>-Achsenabschnitt <span class="math inline">\(\beta_0 = 41.93\)</span> die Performance einer durchschnittlichen, männlichen Versuchsperson mit einem Trainingsalter von <code>ta</code><span class="math inline">\(= 6\)</span>. Der zweite Koeffizient <span class="math inline">\(\beta_1 = 22.75\)</span> kodiert hier den Unterschied zwischen einer männlichen und einer weiblichen Versuchsperson jeweils mit einem Trainingsalter von <code>ta</code><span class="math inline">\(=6\)</span>. Der Steigungskoeffizient <span class="math inline">\(\beta_2 = 1.76\)</span> dagegen, kodiert den Unterschied zwischen zwei männlichen Versuchspersonen, die sich um ein Trainingsjahr <code>ta</code> voneinander unterscheiden. Der letzte Koeffizient <span class="math inline">\(\beta_3 = 2.36\)</span>, der Interaktionskoeffizient kodiert nun den Unterschied in den Steigungen zwischen den männlichen und den weiblichen Versuchspersonen. Um den Unterschied zwischen zwei weiblichen Versuchsperson zu erhalten, die sich um ein Trainingsjahr <code>ta</code> voneinander Unterscheiden, müssen daher <span class="math inline">\(\beta_2\)</span> und <span class="math inline">\(\beta_3\)</span> miteinander addiert werden <span class="math inline">\(4.12\)</span>.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-mlm-dummy-combi-05" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-mlm-dummy-combi-05-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="mlm_dummy_coding_files/figure-html/fig-mlm-dummy-combi-05-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-mlm-dummy-combi-05-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Abbildung&nbsp;19.11: Leistungsentwicklung in Abhängigkeit vom Alter und Gender und die Modellkoeffizienten im zentrierten Modell.
</figcaption>
</figure>
</div>
</div>
</div>
<p>In <a href="#fig-mlm-dummy-combi-05" class="quarto-xref">Abbildung&nbsp;<span>19.11</span></a> sind die einzelnen Modellkoeffizienten aus <a href="#tbl-mlm-dummy-combi-02" class="quarto-xref">Tabelle&nbsp;<span>19.9</span></a> in der Grafik miteingefügt. Die Interpretation der Werte sollte damit klarer werden.</p>
</section>
<section id="verschiedene-kodierschemas-für-die-dummy-variablen." class="level2" data-number="19.6">
<h2 data-number="19.6" class="anchored" data-anchor-id="verschiedene-kodierschemas-für-die-dummy-variablen."><span class="header-section-number">19.6</span> Verschiedene Kodierschemas für die Dummy-Variablen.</h2>
<p>In der Herleitung der Integration von nominalen Faktoren in die multiple Regression ist bisher ein bestimmtes Schema verwendet worden, wie die einzelnen Faktorstufen auf <span class="math inline">\(X\)</span>-Variablen abgebildet werden. Dazu wurde eine Referenzstufe bestimmt, welche durch den <span class="math inline">\(Y\)</span>-Achsenabschnitt im Modell modelliert wird und die anderen <span class="math inline">\(\beta_i\)</span>-Koeffizienten bilden jeweils die Abweichungen der Faktorstufenmittelwerten von dieser Referenzstufe ab.</p>
<p>Wenn die <span class="math inline">\(\beta_i\)</span>-Koeffizienten in einem Vektor <span class="math inline">\(\boldsymbol{\beta}\)</span> zusammengefasst.</p>
<p><span class="math display">\[\begin{equation*}
\boldsymbol{\beta} = (\beta_0, \beta_1, \ldots, \beta_K)^T
\end{equation*}\]</span></p>
<p>und die Mittelwerte <span class="math inline">\(\mu_i\)</span> der Faktorstufen <span class="math inline">\(i = 1,2,\ldots,K\)</span> in einem Vektor <span class="math inline">\(\boldsymbol{\mu}\)</span></p>
<p><span class="math display">\[\begin{equation*}
\boldsymbol{\mu} = (\mu_1, \mu_2, \ldots, \mu_K)^T
\end{equation*}\]</span></p>
<p>Dann können die <span class="math inline">\(\beta\)</span>-Koeffizienten im Sinne der Mittelwerte der Faktorstufen als eine Abbildung von <span class="math inline">\(\boldsymbol{\beta} \rightarrow \boldsymbol{\mu}\)</span> aufgefasst werden. Diese Abbildung kann daher auch mit ein Symbol, beispielsweise <span class="math inline">\(\boldsymbol{B}\)</span>, abgebildet werden.</p>
<p><span class="math display">\[\begin{equation*}
\boldsymbol{\mu} = \boldsymbol{B\beta}
\end{equation*}\]</span></p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tipp
</div>
</div>
<div class="callout-body-container callout-body">
<p>Wenn ihr euch mit Matrizen auskennt, dann werdet ihr gemerkt haben, dass es hier um Grunde um eine lineare Abbildungen handelt. Wenn euch das nichts sagt, dann einfach weiterlesen.</p>
</div>
</div>
<section id="treatment-kodierung" class="level3" data-number="19.6.1">
<h3 data-number="19.6.1" class="anchored" data-anchor-id="treatment-kodierung"><span class="header-section-number">19.6.1</span> Treatment-Kodierung</h3>
<p>Die Abbildung mit einer Referenzstufe und Abweichungen von dieser Stufe, wird als <strong>treatment coding</strong> bezeichnet. In <code>R</code> kann diese Kodierung mit Hilfe der Funktion <code>contr.treatment()</code> erstellt werden, bzw. ist standardmäßig bei <code>R</code> für nominale Variablen eingestellt.</p>
<p>Sei eine Faktorvariable <span class="math inline">\(A\)</span> hat drei Stufen <span class="math inline">\(K = 3, A, B, C\)</span> gegeben. Mit der Funktion <code>mean_contrasts()</code> aus dem package <code>codingMatrices</code> können die Abbildung dargestellt werden (Im Code werden noch die Zeilen- und Spaltenbeschriftungen geändert um den Output leichter interpretieren zu können).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>f_A <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"A"</span>,<span class="st">"B"</span>,<span class="st">"C"</span>)</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>beta_to_mu <span class="ot">&lt;-</span> <span class="fu">mean_contrasts</span>(<span class="fu">contr.treatment</span>(f_A))</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a><span class="fu">dimnames</span>(beta_to_mu)[[<span class="dv">1</span>]] <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"beta_"</span>,<span class="dv">0</span><span class="sc">:</span><span class="dv">2</span>)</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a><span class="fu">dimnames</span>(beta_to_mu)[[<span class="dv">2</span>]] <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"mu_"</span>,f_A)</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>beta_to_mu</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       mu_A mu_B mu_C
beta_0  1    .    .  
beta_1 -1    1    .  
beta_2 -1    .    1  </code></pre>
</div>
</div>
<p>Im Ausdruck bezeichnen die Zeilen die <span class="math inline">\(\beta\)</span>-Koeffizienten im multiplen Regressionsmodell, während die Spalten die Mittelwerte <span class="math inline">\(\mu_i\)</span> der Faktorstufen <span class="math inline">\(A,B\)</span> und <span class="math inline">\(C\)</span> spezifizieren. Die Punkte <code>.</code> stehen für den Wert <span class="math inline">\(0\)</span>. Es ist zu sehen, dass in der ersten Zeile für <span class="math inline">\(\beta_0\)</span> eine <span class="math inline">\(1\)</span> unter <span class="math inline">\(\mu_1\)</span> eingetragen ist, während unter <span class="math inline">\(\mu_2\)</span> und <span class="math inline">\(\mu_3\)</span> jeweils eine <span class="math inline">\(0\)</span> eingetragen sind. D.h., der Koeffizient <span class="math inline">\(\beta_0\)</span> repräsentiert den Mittelwert der Faktorstufe <span class="math inline">\(A\)</span>, der Referenzstufe. In der zweiten Zeile für <span class="math inline">\(\beta_1\)</span> dagegen, steht unter dem Mittelwert <span class="math inline">\(\mu_A\)</span> eine <span class="math inline">\(-1\)</span>, unter <span class="math inline">\(\mu_B\)</span> eine 1 und unter <span class="math inline">\(\mu_C\)</span> eine <span class="math inline">\(0\)</span>. D.h., wie schon bekannt, der Koeffizient <span class="math inline">\(\beta_1\)</span> repräsentiert den Unterschied zwischen den Mittelwerten <span class="math inline">\(\mu_A\)</span> und <span class="math inline">\(\mu_B\)</span> der dazugehörenden Faktorstufen <span class="math inline">\(A\)</span> und <span class="math inline">\(B\)</span>. Das gleiche gilt für die dritte Zeile für <span class="math inline">\(\beta_2\)</span> für den Unterschied <span class="math inline">\(\mu_C - \mu_A\)</span>. Insgesamt, ist hier direkt die Kodierung der Faktorstufen wie sie oben hergeleitet wurde zu erkennen. Die Kodierung ist auch in der dazugehörenden Modellmatrix zu sehen welche die Funktion <code>contr.treatment()</code> verwendet.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1</span>)</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>height_4 <span class="ot">&lt;-</span> height <span class="sc">|&gt;</span> <span class="fu">sample_n</span>(<span class="dv">4</span>)</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a><span class="fu">model.matrix</span>(<span class="sc">~</span>gender, height_4)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  (Intercept) genderm
1           1       0
2           1       1
3           1       0
4           1       1
attr(,"assign")
[1] 0 1
attr(,"contrasts")
attr(,"contrasts")$gender
[1] "contr.treatment"</code></pre>
</div>
</div>
</section>
<section id="sum-to-zero-kodierung" class="level3" data-number="19.6.2">
<h3 data-number="19.6.2" class="anchored" data-anchor-id="sum-to-zero-kodierung"><span class="header-section-number">19.6.2</span> Sum-to-zero Kodierung</h3>
<p>Die Treatmentkodierung ist nicht die einzig mögliche Kodierung, sondern es geht noch zahlreiche andere bzw. es können auch eigene Abbildungen definiert werden. Ein weiteres Kodierungsschema ist die Abweichungskodierung (engl. deviation) welche auch als <em>sum-to-zero</em> Kodierung bezeichnet wird. In <code>R</code> kann dieses Schema mit der Funktion <code>contr.sum()</code> erzeugt werden und das resultierende Abbildungsschema sieht wie folgt aus.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>beta_to_mu <span class="ot">&lt;-</span> <span class="fu">mean_contrasts</span>(<span class="fu">contr.sum</span>(f_A))</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dimnames</span>(beta_to_mu)[[<span class="dv">1</span>]] <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"beta_"</span>,<span class="dv">0</span><span class="sc">:</span><span class="dv">2</span>)</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a><span class="fu">dimnames</span>(beta_to_mu)[[<span class="dv">2</span>]] <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"mu_"</span>,f_A)</span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>beta_to_mu</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       mu_A mu_B mu_C
beta_0  1/3  1/3  1/3
beta_1  2/3 -1/3 -1/3
beta_2 -1/3  2/3 -1/3</code></pre>
</div>
</div>
<p>Die erste Zeile ist direkt ablesbar. Der Koeffizient <span class="math inline">\(\beta_0\)</span> stellt den Mittelwert <span class="math inline">\(\bar{\mu}\)</span> der Stufenmittelwerte dar. Die zweite und dritte Zeile für <span class="math inline">\(\beta_1\)</span> und <span class="math inline">\(\beta_2\)</span> sind etwas undurchsichtiger. Die <span class="math inline">\(\beta_i\)</span>-Koeffizienten repräsentieren jeweils die Abweichung der Stufe <span class="math inline">\(\mu_i\)</span> vom Gesamtmittelwert <span class="math inline">\(\bar{\mu}\)</span>. Formal:</p>
<p><span class="math display">\[\begin{equation*}
\beta_i = \mu_i - \bar{\mu} \quad i = 2,3,\ldots,K
\end{equation*}\]</span></p>
<p>Wie resultiert daraus diese Kodierung? Sei zunächst <span class="math inline">\(\beta_1\)</span> betrachtet. Dieser Koeffizient kodiert die Abweichung der Gruppe <code>A</code> vom Gesamtmittelwert <span class="math inline">\(\bar{y}\)</span>. D.h.</p>
<p><span class="math display">\[\begin{equation*}
\beta_1 = \mu_A - \bar{\mu}
\end{equation*}\]</span></p>
<p>Der Gesamtmittelwert <span class="math inline">\(\bar{y}\)</span> berechnet sich nach <span class="math inline">\(\bar{y} = \frac{1}{3}\sum_{i=1}^3\mu_i\)</span>. Daraus folgt.</p>
<p><span class="math display">\[\begin{equation*}
\begin{aligned}
\beta_1 &amp;= \mu_A - \bar{\mu} \\
        &amp;= \mu_A - \frac{\sum_{i=1}^3\mu_i}{3} \\
        &amp;= \mu_A - \frac{1}{3}\mu_A - \frac{1}{3}\mu_B - \frac{1}{3}\mu_C \\
        &amp;= \frac{2}{3}\mu_A - \frac{1}{3}\mu_B - \frac{1}{3}\mu_C
\end{aligned}
\end{equation*}\]</span></p>
<p>Es werden die Koeffizienten <code>2/3 -1/3 -1/3</code> aus dem Output erhalten. Das gleiche Schema trifft auch für <span class="math inline">\(\beta_2\)</span> zu, der die Abweichung von Gruppe <code>B</code> zum Gesamtmittelwert <span class="math inline">\(\bar{y}\)</span> kodiert. Übertragen auf das Schema im Beispiel der Reaktionszeiten ergibt sich.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>mu_i <span class="ot">&lt;-</span> data <span class="sc">|&gt;</span> <span class="fu">group_by</span>(group) <span class="sc">|&gt;</span> <span class="fu">summarize</span>(<span class="at">m =</span> <span class="fu">mean</span>(rt))</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>mu_bar <span class="ot">&lt;-</span> <span class="fu">mean</span>(data<span class="sc">$</span>rt)</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>mu_i <span class="sc">|&gt;</span> <span class="fu">add_row</span>(<span class="at">group=</span><span class="st">"mu_bar"</span>, <span class="at">m =</span> mu_bar)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 2
  group      m
  &lt;chr&gt;  &lt;dbl&gt;
1 A       510.
2 B       600.
3 C       707.
4 D       805.
5 mu_bar  655.</code></pre>
</div>
</div>
<p>Beziehungsweise für die Abweichungen der Mittelwerte <span class="math inline">\(\mu_i\)</span> vom Gesamtmittelwert <span class="math inline">\(\bar{\mu}\)</span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>mu_i<span class="sc">$</span>m <span class="sc">-</span> mu_bar</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -145.78113  -55.63090   51.63251  149.77952</code></pre>
</div>
</div>
<p>Nun wird eine Modellanpassung mit <code>lm()</code> durchgeführt, wobei <code>contr.sum()</code> anstatt <code>contr.treatment()</code> verwendet werden soll. Dies kann direkt im Aufruf von <code>lm()</code> über den Parameter <code>contrasts</code> spezifiziert werden. Der Parameter erwartet eine Liste mit den Namen der nominalen Variablen zusammen mit der Kodierungsfunktion als Zeichenkette (Es gibt noch weitere Möglichkeiten).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>mod_sum <span class="ot">&lt;-</span> <span class="fu">lm</span>(rt <span class="sc">~</span> group, data, <span class="at">contrasts =</span> <span class="fu">list</span>(<span class="at">group =</span> <span class="st">'contr.sum'</span>))</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="fu">coef</span>(mod_sum)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>(Intercept)      group1      group2      group3 
  655.30733  -145.78113   -55.63090    51.63251 </code></pre>
</div>
</div>
<p>Es ist zu sehen, dass die <span class="math inline">\(\beta\)</span>-Koeffizienten tatsächlich den Gesamtmittelwert und die Abweichungen der Faktormittelwerte <span class="math inline">\(\mu_i\)</span> vom Gesamtmittelwert <span class="math inline">\(\bar{\mu}\)</span> kodieren. Es fehlt allerdings der letzte Abweichungswert. Hier kommt die Eigenschaft dieser Kodierung ins Spiel, die der Kodierung ihren Namen sum-to-zero gegeben hat. Per Konstruktion haben die Abweichungen die Eigenschaft das sie aufsummiert gleich <span class="math inline">\(0\)</span> ergeben. Beispielweise, seien drei Wert <span class="math inline">\(1,2,3\)</span> gegeben. Deren Mittelwert ist <span class="math inline">\(3\)</span> und die Abweichungen der Werte vom Mittelwert sind <span class="math inline">\(-1,0,1\)</span>. Diese Abweichung aufsummiert ergeben den Wert <span class="math inline">\(0\)</span>. Diese Eigenschaft trifft immer zu wenn die Abweichungen vom Mittelwert gebildet werden, dass deren Summe gleich <span class="math inline">\(0\)</span> ist. Dementsprechend, wie auch bei den Residuen kennengelernt, die Abweichungen von Werten von deren Mittelwert ergeben <span class="math inline">\(0\)</span>. Daher gilt:</p>
<p><span class="math display">\[\begin{equation*}
\begin{aligned}
&amp; \sum_{i=1}^K \beta_i = 0 \\
\Leftrightarrow &amp; \beta_K = -\sum_{i=1}^{K-1}
\end{aligned}
\end{equation*}\]</span></p>
<p>D.h. durch die Summation der Abweichungen und der Invertierung des Vorzeichens kann der letzte Abweichungswert erhalten werden. Übertragen auf das Beispiel:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="sc">-</span><span class="fu">sum</span>(<span class="fu">coef</span>(mod_sum)[<span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>])</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 149.7795</code></pre>
</div>
</div>
<p>D.h. der letzte Abweichungswert oben aus dem Output wird erhalten. Die Anwendung von <code>contr.sum()</code> wirkt sich entsprechend auf die Konstruktion der Modellmatrix aus. Daher unterscheiden sich die resultierenden Modellmatrizen zwischen der Treatment- und der Summ-to-Zero Kodierung. (Zur besseren Übersicht wird ein verkürzter Datensatzmit <code>data_8</code> nur <span class="math inline">\(8\)</span> Einträgen verwendet).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>data_8 <span class="ot">&lt;-</span> data <span class="sc">|&gt;</span> <span class="fu">sample_n</span>(<span class="dv">8</span>)</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a><span class="fu">model.matrix</span>(<span class="sc">~</span>group, data_8)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  (Intercept) groupB groupC groupD
1           1      1      0      0
2           1      0      1      0
3           1      0      0      0
4           1      0      1      0
5           1      0      1      0
6           1      1      0      0
7           1      0      1      0
8           1      0      0      0
attr(,"assign")
[1] 0 1 1 1
attr(,"contrasts")
attr(,"contrasts")$group
[1] "contr.treatment"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">model.matrix</span>(<span class="sc">~</span>group, data_8, <span class="at">contrasts=</span><span class="fu">list</span>(<span class="at">group=</span><span class="st">'contr.sum'</span>))</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  (Intercept) group1 group2 group3
1           1      0      1      0
2           1      0      0      1
3           1      1      0      0
4           1      0      0      1
5           1      0      0      1
6           1      0      1      0
7           1      0      0      1
8           1      1      0      0
attr(,"assign")
[1] 0 1 1 1
attr(,"contrasts")
attr(,"contrasts")$group
[1] "contr.sum"</code></pre>
</div>
</div>
<p>Bis auf die Spalte <code>(Intercept)</code> unterscheiden sich die Verteilung der <span class="math inline">\(1\)</span> und <span class="math inline">\(0\)</span> in den Modellmatrizen entsprechend den Kodierungsschemas.</p>
</section>
<section id="differenzkodierung" class="level3" data-number="19.6.3">
<h3 data-number="19.6.3" class="anchored" data-anchor-id="differenzkodierung"><span class="header-section-number">19.6.3</span> Differenzkodierung</h3>
<p>Abschließend sei noch eine weitere Möglichkeit betachtet um die Faktorstufen zu kodieren, die Differenzkodierung . Bei der Differenzkodierung werden jeweils aufeinanderfolgende Stufen miteinander verglichen. In <code>R</code> kann dieses Kodierungsssystem mittels der Funktion <code>contr.diff()</code> aus dem package <code>codingMatrices</code> erstellen werden. Angewendet auf den Faktor <code>f_A</code> ergibt sich.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>beta_to_mu <span class="ot">&lt;-</span> <span class="fu">mean_contrasts</span>(<span class="fu">contr.diff</span>(f_A))</span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dimnames</span>(beta_to_mu)[[<span class="dv">1</span>]] <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"beta_"</span>,<span class="dv">0</span><span class="sc">:</span><span class="dv">2</span>)</span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a><span class="fu">dimnames</span>(beta_to_mu)[[<span class="dv">2</span>]] <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"mu_"</span>,f_A)</span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a>beta_to_mu</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       mu_A mu_B mu_C
beta_0  1    .    .  
beta_1 -1    1    .  
beta_2  .   -1    1  </code></pre>
</div>
</div>
<p>Der Koeffizient <span class="math inline">\(\beta_0\)</span> ist wieder gleich dem Mittelwert aus Gruppe <span class="math inline">\(A\)</span>. Der Koeffiziente <span class="math inline">\(\beta_1\)</span> kodiert ähnlich wie beim Treatmentkoding den Unterschied zwischen den Mittelwerten der Faktoren <span class="math inline">\(A\)</span> und <span class="math inline">\(B\)</span>. Im Unterschied zum Treatmentkoding kodiert <span class="math inline">\(\beta_2\)</span> dagegen den Unterschied zwischen den Mittelwerten der Faktoren <span class="math inline">\(C\)</span> und <span class="math inline">\(B\)</span>.</p>
<p>Angewendet auf das Reaktionszeitexperiment:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>mod_diff <span class="ot">&lt;-</span> <span class="fu">lm</span>(rt <span class="sc">~</span> group, data, <span class="at">contrasts =</span> <span class="fu">list</span>(<span class="at">group =</span> <span class="st">'contr.diff'</span>))</span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a><span class="fu">coef</span>(mod_diff)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>(Intercept)    groupB-A    groupC-B    groupD-C 
  509.52619    90.15023   107.26341    98.14701 </code></pre>
</div>
</div>
<p>Die Koeffizienten entsprechen den aufeinanderfolgenden Unterschieden der Gruppenmittelwerten.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="fu">diff</span>(mu_i<span class="sc">$</span>m)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  90.15023 107.26341  98.14701</code></pre>
</div>
</div>
<p>Entsprechend resultiert wieder eine andere Modellmatrix.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="fu">model.matrix</span>(<span class="sc">~</span>group, data_8, <span class="at">contrasts =</span> <span class="fu">list</span>(<span class="at">group =</span> <span class="st">'contr.diff'</span>))</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  (Intercept) groupB-A groupC-B groupD-C
1           1        1        0        0
2           1        1        1        0
3           1        0        0        0
4           1        1        1        0
5           1        1        1        0
6           1        1        0        0
7           1        1        1        0
8           1        0        0        0
attr(,"assign")
[1] 0 1 1 1
attr(,"contrasts")
attr(,"contrasts")$group
[1] "contr.diff"</code></pre>
</div>
</div>
</section>
<section id="zusammenfassung" class="level3" data-number="19.6.4">
<h3 data-number="19.6.4" class="anchored" data-anchor-id="zusammenfassung"><span class="header-section-number">19.6.4</span> Zusammenfassung</h3>
<p>Zusammenfassend zeigen diese Beispiele, dass die verschiedenen Kodierungssysteme dazu führen, dass die Bedeutung der Regressionskoeffizienten <span class="math inline">\(\beta_i\)</span> sich unterscheidet je nachdem welches Kodierungssystem verwendet wird. Daher, um die Werte der Koeffizienten interpretieren zu können, muss bekannt sein, welches Kodierungssystem bei der Analyse verwendet wurde. Leider ist dies nicht die einzige Implikation, sondern die unterschiedlichen Kodierungssysteme führen zu weiteren, subtilen Unterschieden die ganz und gar nicht offensichtlich sind. Vor allem später, bei der Behandlung von faktoriellen, experimentellen Untersuchungsdesigns werden die Details der Kodierungssysteme noch einmal stärker von Relevanz werden. In Bezug auf den allgemeinen Fit des Modells haben die Unterschiedlichen Systeme allerdings keinen Einfluss. Die angepasste Regressionsgerade (Ebene) wird daher durch die Wahl der Kodierungssysteme ebenfalls nicht beeinflusst. Somit sind auch die Residuen <span class="math inline">\(e_i\)</span> unter allen Kodierungssystemen gleich.</p>
<p>Durch die Wahl von speziellen Kodierungssysteme ist es möglich spezifisch gewollte Vergleiche zwischen Faktorenstufen direkt zu kodieren und dann in Form der Koeffizienten statistisch zu überprüfen. Unter der Treatmentkodierung bilden die Koeffizienten direkt die Unterschiede der Faktorenstufen von der Referenzstufe ab. Daher sagt die statistische Signifikanz der Koeffizienten <span class="math inline">\(\beta_i, i = 2,3,\ldots,K\)</span> direkt schon etwas über die statistische Signifikanz dieser Stufen von der ersten Stufe aus. Wird zum Beispiel als die Referenzstufe eine Kontrollkondition gewählt und die anderen Stufen bilden unterschiedliche Interventionsstufen ab, dann kann über die Koeffizienten direkt der Unterschied der Interventionsstufen von der Kontrollstufe überprüft werden. Dadurch gibt es eine Überschneidung der Thematik der Kodierungssysteme mit dem der Kontraste bzw. Mehrfachvergleiche. Dies wird später im Kapitel zu Linearen Kontrasten noch einmal betrachtet werden. Dieser kurze Überblick über die Kodierungssysteme basiert hauptsächlich auf <span class="citation" data-cites="venables2023">Venables (<a href="references.html#ref-venables2023" role="doc-biblioref">2023</a>)</span>. Dies ist auch die primäre Quelle um sich in die Thematik noch einmal tiefer einzulesen.</p>
</section>
</section>
<section id="zusammenfassung-1" class="level2" data-number="19.7">
<h2 data-number="19.7" class="anchored" data-anchor-id="zusammenfassung-1"><span class="header-section-number">19.7</span> Zusammenfassung</h2>
<p>In diesem Kapitel wurde gezeigt, dass auch nominale Prädiktorvariablen ohne Probleme in das lineare Modell integrieren können. Dabei können die Variablen rein additiv oder auch als interaktive Effekte eingehen. Damit ist der Prozess um Daten zu modellieren deutlich flexibler geworden. Dabei bleibt aber immer die bekannten Rückführung auf Punkt-Steigungs-Modell erhalten.</p>
</section>
<section id="herleitung-der-identität-von-t-test-und-linearen-modell-optional" class="level2" data-number="19.8">
<h2 data-number="19.8" class="anchored" data-anchor-id="herleitung-der-identität-von-t-test-und-linearen-modell-optional"><span class="header-section-number">19.8</span> Herleitung der Identität von t-Test und linearen Modell (optional)</h2>
<p>Seien beide Gruppen gleich groß (<span class="math inline">\(n\)</span>) mit <span class="math inline">\(N = n_m + n_w = 2 \times n\)</span>. Der t-Wert für <span class="math inline">\(\beta_1\)</span> berechnet sich aus <span class="math inline">\(t = \frac{b_1}{s_b}\)</span> mit:</p>
<p><span class="math display">\[
s_b = \sqrt{\frac{\sum_{i=1}^N (y_i - \bar{y})^2}{N-2}\frac{1}{\sum_{i=1}^N(x_i-\bar{x})^2}}
\]</span> Dadurch, das die <span class="math inline">\(x_i\)</span> entweder gleich <span class="math inline">\(0\)</span> oder <span class="math inline">\(1\)</span> sind, ist <span class="math inline">\(\bar{x}=0.5\)</span> und die Abweichungsquadrate im zweiten Term sind alle gleich <span class="math inline">\(\frac{1}{4}\)</span>.</p>
<p><span class="math display">\[
\sum_{i=1}^N(x_i - \bar{x})^2=\sum_{i=1}^N\left(x_i - \frac{1}{2}\right)^2 = \sum_{i=1}^N\frac{1}{4}=\frac{N}{4}=\frac{2n}{4}=\frac{n}{2}
\]</span></p>
<p>Der ersten Term kann mit etwas Algebra und der Definition für die Stichprobenvarianz <span class="math inline">\(s^2\)</span> auf die gewünschte Form gebracht werden.</p>
<p><span class="math display">\[
\frac{\sum_{i=1}^N(y_i-\hat{y})^2}{N-2}=\frac{\sum_{i=1}^n(\overbrace{y_{im} - \bar{y}_m}^{Männer})^2+\sum_{i=1}^n(\overbrace{y_{iw}-\bar{y}_w}^{Frauen})^2}{2(n-1)}=\frac{(n-1)s_m^2+(n-1)s_w^2}{2(n-1)}=\frac{s_m^2+s_w^2}{2}
\]</span></p>
<p>Die Herleitung für <span class="math inline">\(\beta_1 = \Delta = \mu_w - \mu_m\)</span> ist ebenfalls relativ geradlinig wenn wir uns an den Zusammenhang zwischen <span class="math inline">\(\beta_1\)</span> und der Kovarianz zwischen <span class="math inline">\(x\)</span> und <span class="math inline">\(y\)</span> erinnern. Mit <span class="math inline">\(s_x^2 = \frac{N\frac{1}{4}}{N-1} = \frac{N}{4(N-1)}\)</span> folgt:</p>
<p><span class="math display">\[\begin{align*}
    b_1 &amp;= \frac{cov(x,y)}{s_x^2} \\
    &amp;= \frac{\sum_{i=1}^N(y_i - \bar{y})(x_i - \bar{x})}{N-1} \frac{4(N-1)}{N} \\
    &amp;= 4\frac{\sum_{i=1}^n(y_{im}-\bar{y})\frac{-1}{2}+\sum(y_{iw}-\bar{y})\frac{1}{2}}{N} \\
    &amp;= \frac{4}{2}\frac{\sum_{i=1}^n(y_{iw}-\bar{y}) - \sum_{i=1}^n(y_{im}-\bar{y})}{2n} \\
    &amp;= \frac{\sum_{i=1}^n y_{iw}}{n} - \frac{n\bar{y}}{n} - \frac{\sum_{i=1}^n y_{im}}{n} + \frac{n\bar{y}}{n} \\
    &amp;= \bar{y}_w - \bar{y}_m = \Delta
\end{align*}\]</span></p>
<p>Zu guter Letzt noch die Herleitung für <span class="math inline">\(\beta_0 = \mu_m\)</span>.</p>
<p>Mit <span class="math inline">\(b_1 = \Delta = \bar{y}_w - \bar{y}_m\)</span>: <span class="math display">\[\begin{align*}
b_0 &amp;= \bar{y} - \Delta \times \bar{x} \\
&amp;= \frac{\sum_{i=1}^N y_i}{N} - \Delta \times \frac{1}{2} \\
&amp;= \frac{\sum_{i=1}^n y_{im} + \sum_{i=1}^n y_{iw}}{2n} - \frac{1}{2}(\bar{y}_w - \bar{y}_m)  \\
&amp;= \frac{1}{2}\frac{\sum_{i=1}^ny_{im}}{n} + \frac{1}{2}\frac{\sum_{i=1}^ny_{iw}}{n} - \frac{1}{2}\bar{y}_w + \frac{1}{2}\bar{y}_m \\
&amp;= \frac{1}{2}\bar{y}_m + \frac{1}{2}\bar{y}_w - \frac{1}{2}\bar{y}_w + \frac{1}{2}\bar{y}_m \\
&amp;= \bar{y}_m
\end{align*}\]</span></p>
</section>
<section id="zum-nach--und-weiterlesen" class="level2" data-number="19.9">
<h2 data-number="19.9" class="anchored" data-anchor-id="zum-nach--und-weiterlesen"><span class="header-section-number">19.9</span> Zum Nach- und Weiterlesen</h2>
<p>In <span class="citation" data-cites="kutner2005">(<a href="references.html#ref-kutner2005" role="doc-biblioref">Kutner u.&nbsp;a. 2005, p.313–319</a>)</span> sind die Herleitungen zur Indexkodierung etwas ausführlicher erklärt.</p>


<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list" style="display: none">
<div id="ref-kutner2005" class="csl-entry" role="listitem">
Kutner, Michael H, Christopher J Nachtsheim, John Neter, und William Li. 2005. <em>Applied Linear Statistical Models</em>. 5. Aufl. McGraw-Hill Irwin New York.
</div>
<div id="ref-venables2023" class="csl-entry" role="listitem">
Venables, Bill. 2023. <span>„Coding Matrices, Contrast Matrices and Linear Models“</span>.
</div>
</div>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Kopiert");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Kopiert");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./mlm_interactions.html" class="pagination-link" aria-label="Interaktionseffekte">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Interaktionseffekte</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./mlm_hierarchies.html" class="pagination-link" aria-label="Modellhierarchien">
        <span class="nav-page-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Modellhierarchien</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>